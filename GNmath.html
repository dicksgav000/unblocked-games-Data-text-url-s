data:text/html;base64,PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KICAgIDxoZWFkPgogICAgICAgIDxiYXNlIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9nbi1tYXRoL2duLW1hdGgtRE9OVERNQ0FAbWFpbi8iPgogICAgPGxpbmsgcmVsPSJpY29uIiB0eXBlPSJpbWFnZS9wbmciIGhyZWY9ImZhdmljb24ucG5nIj4KICAgIDxsaW5rIHJlbD0iaWNvbiIgdHlwZT0iaW1hZ2UvcG5nIiBzaXplcz0iMzJ4MzIiIGhyZWY9ImZhdmljb24ucG5nIj4KICAgIDxsaW5rIHJlbD0iYXBwbGUtdG91Y2gtaWNvbiIgaHJlZj0iZmF2aWNvbi5wbmciPgogICAgPHNjcmlwdD4KICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gJyc7CiAgICAgICAgICAgIHJldHVybiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGxlYXZlPyBBbnkgdW5zYXZlZCBjaGFuZ2VzIHdpbGwgYmUgbG9zdC4nOwogICAgICAgIH0pOwogICAgPC9zY3JpcHQ+CiAgICA8c2NyaXB0IGFzeW5jPSIiIHNyYz0iaHR0cHM6Ly93d3cuZ29vZ2xldGFnbWFuYWdlci5jb20vZ3RhZy9qcz9pZD1HLVdYNVZTNTRaRFciPjwvc2NyaXB0PgogICAgPHNjcmlwdD4KICAgICAgICB3aW5kb3cuZGF0YUxheWVyID0gd2luZG93LmRhdGFMYXllciB8fCBbXTsKCiAgICAgICAgZnVuY3Rpb24gZ3RhZygpIHsKICAgICAgICAgICAgZGF0YUxheWVyLnB1c2goYXJndW1lbnRzKTsKICAgICAgICB9CiAgICAgICAgZ3RhZygnanMnLCBuZXcgRGF0ZSgpKTsKICAgICAgICBndGFnKCdjb25maWcnLCAnRy1XWDVWUzU0WkRXJyk7CiAgICA8L3NjcmlwdD4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIj4KICAgIDx0aXRsZT5nbi1tYXRoPC90aXRsZT4KICAgIDxtZXRhIG5hbWU9InRpdGxlIiBjb250ZW50PSJHTi1NYXRoIj4KICAgIDxtZXRhIG5hbWU9ImRlc2NyaXB0aW9uIiBjb250ZW50PSJQbGF5IHVuYmwqY2tlZCBnYW1lcyBsaWtlIENyYXp5IENhdHRsZSAzRCBhbmQgRHJpdmVNYWQgb24gR04tTWF0aC4gRmFzdCwgZnJlZSwgbm8gZG93bmxvYWRz4oCUcGVyZmVjdCBmb3Igc2Nob29sIG9yIGhvbWUuIj4KICAgIDxtZXRhIHByb3BlcnR5PSJvZzp0eXBlIiBjb250ZW50PSJ3ZWJzaXRlIj4KICAgIDxtZXRhIHByb3BlcnR5PSJvZzp1cmwiIGNvbnRlbnQ9Imh0dHBzOi8vZ24tbWF0aC5naXRodWIuaW8vIj4KICAgIDxtZXRhIHByb3BlcnR5PSJvZzp0aXRsZSIgY29udGVudD0iR04tTWF0aCI+CiAgICA8bWV0YSBwcm9wZXJ0eT0ib2c6ZGVzY3JpcHRpb24iIGNvbnRlbnQ9IlBsYXkgdW5ibCpja2VkIGdhbWVzIGxpa2UgQ3JhenkgQ2F0dGxlIDNEIGFuZCBEcml2ZU1hZCBvbiBHTi1NYXRoLiBGYXN0LCBmcmVlLCBubyBkb3dubG9hZHPigJRwZXJmZWN0IGZvciBzY2hvb2wgb3IgaG9tZS4iPgogICAgPG1ldGEgbmFtZT0idHdpdHRlcjpjYXJkIiBjb250ZW50PSJzdW1tYXJ5X2xhcmdlX2ltYWdlIj4KICAgIDxtZXRhIG5hbWU9InR3aXR0ZXI6dXJsIiBjb250ZW50PSJodHRwczovL2duLW1hdGguZ2l0aHViLmlvLyI+CiAgICA8bWV0YSBuYW1lPSJ0d2l0dGVyOnRpdGxlIiBjb250ZW50PSJHTi1NYXRoIj4KICAgIDxtZXRhIG5hbWU9InR3aXR0ZXI6ZGVzY3JpcHRpb24iIGNvbnRlbnQ9IlBsYXkgdW5ibCpja2VkIGdhbWVzIGxpa2UgQ3JhenkgQ2F0dGxlIDNEIGFuZCBEcml2ZU1hZCBvbiBHTi1NYXRoLiBGYXN0LCBmcmVlLCBubyBkb3dubG9hZHPigJRwZXJmZWN0IGZvciBzY2hvb2wgb3IgaG9tZS4iPgogICAgPHN0eWxlPgogICAgICAgIDpyb290IHsKICAgIC0tcHJpbWFyeTogI2ZjMjY1MTsKICAgIC0tcHJpbWFyeS1ob3ZlcjogI2U5MWU0NzsKICAgIC0tcHJpbWFyeS1saWdodDogcmdiYSgyNTIsIDM4LCA4MSwgMC4xKTsKICAgIC0tcHJpbWFyeS1saWdodGVyOiByZ2JhKDI1MiwgMzgsIDgxLCAwLjA1KTsKICAgIC0tYWNjZW50OiAjOGI1Y2Y2OwogICAgLS1hY2NlbnQtbGlnaHQ6IHJnYmEoMTM5LCA5MiwgMjQ2LCAwLjEpOwogICAgLS1zdWNjZXNzOiAjMTBiOTgxOwogICAgLS13YXJuaW5nOiAjZjU5ZTBiOwogICAgLS10ZXh0OiAjMWExYTFhOwogICAgLS10ZXh0LW11dGVkOiAjNmI3MjgwOwogICAgLS10ZXh0LWxpZ2h0OiAjOWNhM2FmOwogICAgLS1iZzogI2ZmZmZmZjsKICAgIC0tYmctc2Vjb25kYXJ5OiAjZjhmYWZjOwogICAgLS1zdXJmYWNlOiAjZmZmZmZmOwogICAgLS1zdXJmYWNlLWhvdmVyOiAjZjFmNWY5OwogICAgLS1ib3JkZXI6ICNlMmU4ZjA7CiAgICAtLWJvcmRlci1saWdodDogI2YxZjVmOTsKICAgIC0tZ2xhc3M6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTsKICAgIC0tc2hhZG93LXhzOiAwIDFweCAycHggMCByZ2IoMCAwIDAgLyAwLjA1KTsKICAgIC0tc2hhZG93LXNtOiAwIDFweCAzcHggMCByZ2IoMCAwIDAgLyAwLjEpLCAwIDFweCAycHggLTFweCByZ2IoMCAwIDAgLyAwLjEpOwogICAgLS1zaGFkb3c6IDAgNHB4IDZweCAtMXB4IHJnYigwIDAgMCAvIDAuMSksIDAgMnB4IDRweCAtMnB4IHJnYigwIDAgMCAvIDAuMSk7CiAgICAtLXNoYWRvdy1sZzogMCAxMHB4IDE1cHggLTNweCByZ2IoMCAwIDAgLyAwLjEpLCAwIDRweCA2cHggLTRweCByZ2IoMCAwIDAgLyAwLjEpOwogICAgLS1zaGFkb3cteGw6IDAgMjBweCAyNXB4IC01cHggcmdiKDAgMCAwIC8gMC4xKSwgMCA4cHggMTBweCAtNnB4IHJnYigwIDAgMCAvIDAuMSk7CiAgICAtLXNoYWRvdy1nbG93OiAwIDAgMjBweCByZ2JhKDI1MiwgMzgsIDgxLCAwLjMpOwogICAgLS1yYWRpdXM6IDEycHg7CiAgICAtLXJhZGl1cy1zbTogOHB4OwogICAgLS1yYWRpdXMtbGc6IDE2cHg7CiAgICAtLXJhZGl1cy14bDogMjBweDsKICAgIC0tZ3JhZGllbnQtcHJpbWFyeTogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2ZjMjY1MSAwJSwgI2U5MWU0NyAxMDAlKTsKICAgIC0tZ3JhZGllbnQtYWNjZW50OiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjOGI1Y2Y2IDAlLCAjN2MzYWVkIDEwMCUpOwogICAgLS1ncmFkaWVudC1zdXJmYWNlOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZmZmZmZmIDAlLCAjZjhmYWZjIDEwMCUpOwp9CgouZGFyay1tb2RlIHsKICAgIC0tcHJpbWFyeTogI2ZjMjY1MTsKICAgIC0tcHJpbWFyeS1ob3ZlcjogI2ZmNGQ3NTsKICAgIC0tcHJpbWFyeS1saWdodDogcmdiYSgyNTIsIDM4LCA4MSwgMC4xNSk7CiAgICAtLXByaW1hcnktbGlnaHRlcjogcmdiYSgyNTIsIDM4LCA4MSwgMC4wOCk7CiAgICAtLWFjY2VudDogI2E4NTVmNzsKICAgIC0tYWNjZW50LWxpZ2h0OiByZ2JhKDE2OCwgODUsIDI0NywgMC4xNSk7CiAgICAtLXN1Y2Nlc3M6ICMzNGQzOTk7CiAgICAtLXdhcm5pbmc6ICNmYmJmMjQ7CiAgICAtLXRleHQ6ICNmMWY1Zjk7CiAgICAtLXRleHQtbXV0ZWQ6ICM5NGEzYjg7CiAgICAtLXRleHQtbGlnaHQ6ICM2NDc0OGI7CiAgICAtLWJnOiAjMGYxNzJhOwogICAgLS1iZy1zZWNvbmRhcnk6ICMxZTI5M2I7CiAgICAtLXN1cmZhY2U6ICMxZTI5M2I7CiAgICAtLXN1cmZhY2UtaG92ZXI6ICMzMzQxNTU7CiAgICAtLWJvcmRlcjogIzMzNDE1NTsKICAgIC0tYm9yZGVyLWxpZ2h0OiAjNDc1NTY5OwogICAgLS1nbGFzczogcmdiYSgzMCwgNDEsIDU5LCAwLjgpOwogICAgLS1zaGFkb3cteHM6IDAgMXB4IDJweCAwIHJnYigwIDAgMCAvIDAuNCk7CiAgICAtLXNoYWRvdy1zbTogMCAxcHggM3B4IDAgcmdiKDAgMCAwIC8gMC41KSwgMCAxcHggMnB4IC0xcHggcmdiKDAgMCAwIC8gMC41KTsKICAgIC0tc2hhZG93OiAwIDRweCA2cHggLTFweCByZ2IoMCAwIDAgLyAwLjUpLCAwIDJweCA0cHggLTJweCByZ2IoMCAwIDAgLyAwLjUpOwogICAgLS1zaGFkb3ctbGc6IDAgMTBweCAxNXB4IC0zcHggcmdiKDAgMCAwIC8gMC42KSwgMCA0cHggNnB4IC00cHggcmdiKDAgMCAwIC8gMC42KTsKICAgIC0tc2hhZG93LXhsOiAwIDIwcHggMjVweCAtNXB4IHJnYigwIDAgMCAvIDAuNyksIDAgOHB4IDEwcHggLTZweCByZ2IoMCAwIDAgLyAwLjcpOwogICAgLS1zaGFkb3ctZ2xvdzogMCAwIDIwcHggcmdiYSgyNTIsIDM4LCA4MSwgMC40KTsKICAgIC0tZ3JhZGllbnQtcHJpbWFyeTogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2ZjMjY1MSAwJSwgI2ZmNGQ3NSAxMDAlKTsKICAgIC0tZ3JhZGllbnQtYWNjZW50OiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjYTg1NWY3IDAlLCAjOTMzM2VhIDEwMCUpOwogICAgLS1ncmFkaWVudC1zdXJmYWNlOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMWUyOTNiIDAlLCAjMzM0MTU1IDEwMCUpOwp9CgoqIHsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KCmJvZHkgewogICAgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgJ1NGIFBybyBEaXNwbGF5JywgJ1NlZ29lIFVJJywgc3lzdGVtLXVpLCBzYW5zLXNlcmlmOwogICAgbGluZS1oZWlnaHQ6IDEuNjsKICAgIG1hcmdpbjogMDsKICAgIHBhZGRpbmc6IDA7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZyk7CiAgICBjb2xvcjogdmFyKC0tdGV4dCk7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOwogICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOwogICAgLW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGdyYXlzY2FsZTsKfQoKaGVhZGVyIHsKICAgIGJhY2tncm91bmQ6IHZhcigtLWdyYWRpZW50LXByaW1hcnkpOwogICAgY29sb3I6IHdoaXRlOwogICAgcG9zaXRpb246IHN0aWNreTsKICAgIHRvcDogMDsKICAgIHotaW5kZXg6IDEwMDsKICAgIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy1sZyk7CiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMjBweCk7Cn0KCi5oZWFkZXItY29udGVudCB7CiAgICBtYXgtd2lkdGg6IDEyMDBweDsKICAgIG1hcmdpbjogMCBhdXRvOwogICAgcGFkZGluZzogMS4yNXJlbSAxcmVtOwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICBnYXA6IDEuNXJlbTsKfQoKLmxvZ28gewogICAgZm9udC1zaXplOiAxLjc1cmVtOwogICAgZm9udC13ZWlnaHQ6IDgwMDsKICAgIGxldHRlci1zcGFjaW5nOiAtMC4wMmVtOwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2ZmZmZmZiAwJSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpIDEwMCUpOwogICAgLXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6IHRleHQ7CiAgICAtd2Via2l0LXRleHQtZmlsbC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICBiYWNrZ3JvdW5kLWNsaXA6IHRleHQ7Cn0KCi5zZWFyY2gtY29udGFpbmVyIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4OiAxOwogICAgbWF4LXdpZHRoOiA1MDBweDsKICAgIGdhcDogMC43NXJlbTsKfQoKI3NlYXJjaEJhciB7CiAgICBmbGV4OiAxOwogICAgcGFkZGluZzogMC44NzVyZW0gMXJlbTsKICAgIGJvcmRlcjogMDsKICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cyk7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1nbGFzcyk7CiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMjBweCk7CiAgICBjb2xvcjogdmFyKC0tdGV4dCk7CiAgICBmb250LXNpemU6IDE1cHg7CiAgICBvdXRsaW5lOiBub25lOwogICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKTsKICAgIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy1zbSk7Cn0KCiNzZWFyY2hCYXI6Zm9jdXMgewogICAgYmFja2dyb3VuZDogdmFyKC0tdGV4dCk7CiAgICBib3gtc2hhZG93OiAwIDAgMCAzcHggcmdiYSgyNTIsIDM4LCA4MSwgMC4yNSksIHZhcigtLXNoYWRvdyk7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTFweCk7CiAgICBjb2xvcjogdmFyKC0tZ2xhc3MpOwp9Cgojc2VhcmNoQmFyOjpwbGFjZWhvbGRlciB7CiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7Cn0KCiNzb3J0T3B0aW9ucyB7CiAgICBwYWRkaW5nOiAwLjg3NXJlbSAxcmVtOwogICAgYm9yZGVyOiAwOwogICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzKTsKICAgIGJhY2tncm91bmQ6IHZhcigtLWdsYXNzKTsKICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigyMHB4KTsKICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsKICAgIGZvbnQtc2l6ZTogMTVweDsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIG91dGxpbmU6IG5vbmU7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOwogICAgbWluLXdpZHRoOiAxMzBweDsKICAgIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy1zbSk7Cn0KCiNzb3J0T3B0aW9uczpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS10ZXh0KTsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTsKICAgIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdyk7CiAgICBjb2xvcjogdmFyKC0tZ2xhc3MpOwp9CgojZmlsdGVyT3B0aW9ucyB7CiAgICBwYWRkaW5nOiAwLjg3NXJlbSAxcmVtOwogICAgYm9yZGVyOiAwOwogICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzKTsKICAgIGJhY2tncm91bmQ6IHZhcigtLWdsYXNzKTsKICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigyMHB4KTsKICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsKICAgIGZvbnQtc2l6ZTogMTVweDsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIG91dGxpbmU6IG5vbmU7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOwogICAgbWluLXdpZHRoOiAxMzBweDsKICAgIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy1zbSk7Cn0KCiNmaWx0ZXJPcHRpb25zOmhvdmVyIHsKICAgIGJhY2tncm91bmQ6IHZhcigtLXRleHQpOwogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xcHgpOwogICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93KTsKICAgIGNvbG9yOiB2YXIoLS1nbGFzcyk7Cn0KCi5jb250cm9sLWJ1dHRvbnMgewogICAgZGlzcGxheTogZmxleDsKICAgIGdhcDogMC41cmVtOwp9CgptYWluIHsKICAgIG1hcmdpbjogMCBhdXRvOwogICAgcGFkZGluZzogMnJlbSAxcmVtOwogICAgcGFkZGluZy1ib3R0b206IDZyZW07Cn0KCiN6b25lQ291bnQgewogICAgbWFyZ2luOiAwIDAgMS41cmVtOwogICAgZm9udC1zaXplOiAxNHB4OwogICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOwogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgZ2FwOiAwLjVyZW07Cn0KCiN6b25lQ291bnQ6OmJlZm9yZSB7CiAgICBjb250ZW50OiAnJzsKICAgIHdpZHRoOiA0cHg7CiAgICBoZWlnaHQ6IDRweDsKICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgIGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnkpOwp9CgojY29udGFpbmVyLAojZmVhdHVyZWRab25lcyB7CiAgICBkaXNwbGF5OiBncmlkOwogICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMjAwcHgsIDFmcikpOwogICAgZ2FwOiAxLjVyZW07Cn0KCi56b25lLWl0ZW0gewogICAgYmFja2dyb3VuZDogdmFyKC0tZ3JhZGllbnQtc3VyZmFjZSk7CiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOwogICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWxnKTsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC40cyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOwogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctc20pOwp9Cgouem9uZS1pdGVtOmhvdmVyIHsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtOHB4KSBzY2FsZSgxLjAyKTsKICAgIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy14bCk7CiAgICBib3JkZXItY29sb3I6IHZhcigtLXByaW1hcnkpOwp9Cgouem9uZS1pdGVtOmhvdmVyOjpiZWZvcmUgewogICAgb3BhY2l0eTogMTsKfQoKLnpvbmUtaXRlbTo6YmVmb3JlIHsKICAgIGNvbnRlbnQ6ICcnOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgaW5zZXQ6IDA7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5LWxpZ2h0KTsKICAgIG9wYWNpdHk6IDA7CiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNHMgZWFzZTsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgei1pbmRleDogMTsKfQoKLnpvbmUtaXRlbSBpbWcgewogICAgd2lkdGg6IDEwMCU7CiAgICBhc3BlY3QtcmF0aW86IDE7CiAgICBvYmplY3QtZml0OiBjb3ZlcjsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgYmFja2dyb3VuZDogdmFyKC0tYm9yZGVyLWxpZ2h0KTsKICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjRzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7Cn0KCi56b25lLWl0ZW06aG92ZXIgaW1nIHsKICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7Cn0KCi56b25lLWl0ZW0gYnV0dG9uIHsKICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogICAgY29sb3I6IHZhcigtLXRleHQpOwogICAgYm9yZGVyOiAwOwogICAgcGFkZGluZzogMS4yNXJlbSAxcmVtOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIGxpbmUtaGVpZ2h0OiAxLjQ7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOwogICAgbWluLWhlaWdodDogNzBweDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICB6LWluZGV4OiAyOwp9Cgouem9uZS1pdGVtOmhvdmVyIGJ1dHRvbiB7CiAgICBjb2xvcjogdmFyKC0tcHJpbWFyeSk7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1MiwgMzgsIDgxLCAwLjA1KTsKfQoKI3pvbmVWaWV3ZXIgewogICAgcG9zaXRpb246IGZpeGVkOwogICAgaW5zZXQ6IDA7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZyk7CiAgICB6LWluZGV4OiAxMDAwOwogICAgZGlzcGxheTogbm9uZTsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBhbmltYXRpb246IHNsaWRlSW5VcCAwLjNzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7Cn0KCkBrZXlmcmFtZXMgc2xpZGVJblVwIHsKICAgIGZyb20gewogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxMDAlKTsKICAgIH0KICAgIHRvIHsKICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7CiAgICB9Cn0KCi56b25lLWhlYWRlciB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1ncmFkaWVudC1wcmltYXJ5KTsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIHBhZGRpbmc6IDFyZW0gMS41cmVtOwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctbGcpOwp9Cgouem9uZS10aXRsZSB7CiAgICBmbGV4OiAxOwogICAgbWluLXdpZHRoOiAwOwp9Cgojem9uZU5hbWUgewogICAgZm9udC1zaXplOiAxLjI1cmVtOwogICAgZm9udC13ZWlnaHQ6IDcwMDsKICAgIG1hcmdpbjogMCAwIDAuMjVyZW07CiAgICBsaW5lLWhlaWdodDogMS4zOwp9Cgojem9uZUlkIHsKICAgIGRpc3BsYXk6IG5vbmU7Cn0KCiN6b25lQXV0aG9yIHsKICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCk7CiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlOwogICAgZm9udC13ZWlnaHQ6IDUwMDsKfQoKI3pvbmVBdXRob3I6aG92ZXIgewogICAgY29sb3I6IHdoaXRlOwogICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7Cn0KCi56b25lLWNvbnRyb2xzIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBnYXA6IDAuNzVyZW07Cn0KCi56b25lLWNvbnRyb2xzIGJ1dHRvbiB7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7CiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyk7CiAgICBjb2xvcjogd2hpdGU7CiAgICBwYWRkaW5nOiAwLjYyNXJlbSAxcmVtOwogICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzKTsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOwogICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDIwcHgpOwp9Cgouem9uZS1jb250cm9scyBidXR0b246aG92ZXIgewogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpOwogICAgYm9yZGVyLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSk7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTFweCk7CiAgICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3cpOwp9Cgojem9uZUZyYW1lIHsKICAgIGZsZXgtZ3JvdzogMTsKICAgIGJvcmRlcjogbm9uZTsKICAgIHdpZHRoOiA5MCU7CiAgICBoZWlnaHQ6IDkwJTsKfQoKI3BvcHVwT3ZlcmxheSB7CiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICBpbnNldDogMDsKICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC42KTsKICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cig4cHgpOwogICAgZGlzcGxheTogbm9uZTsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIHotaW5kZXg6IDIwMDA7CiAgICBwYWRkaW5nOiAxcmVtOwogICAgYW5pbWF0aW9uOiBmYWRlSW4gMC4zcyBlYXNlOwp9CgpAa2V5ZnJhbWVzIGZhZGVJbiB7CiAgICBmcm9tIHsKICAgICAgICBvcGFjaXR5OiAwOwogICAgfQogICAgdG8gewogICAgICAgIG9wYWNpdHk6IDE7CiAgICB9Cn0KCi5wb3B1cCB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1zdXJmYWNlKTsKICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1sZyk7CiAgICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3cteGwpOwogICAgd2lkdGg6IDEwMCU7CiAgICBtYXgtd2lkdGg6IDUyMHB4OwogICAgbWF4LWhlaWdodDogODB2aDsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICBhbmltYXRpb246IHNsaWRlSW5TY2FsZSAwLjNzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7Cn0KCkBrZXlmcmFtZXMgc2xpZGVJblNjYWxlIHsKICAgIGZyb20gewogICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC45KSB0cmFuc2xhdGVZKDIwcHgpOwogICAgICAgIG9wYWNpdHk6IDA7CiAgICB9CiAgICB0byB7CiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKSB0cmFuc2xhdGVZKDApOwogICAgICAgIG9wYWNpdHk6IDE7CiAgICB9Cn0KCi5wb3B1cC1oZWFkZXIgewogICAgYmFja2dyb3VuZDogdmFyKC0tZ3JhZGllbnQtcHJpbWFyeSk7CiAgICBjb2xvcjogd2hpdGU7CiAgICBwYWRkaW5nOiAxLjI1cmVtIDEuNXJlbTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwp9CgojcG9wdXBUaXRsZSB7CiAgICBtYXJnaW46IDA7CiAgICBmb250LXNpemU6IDEuMjVyZW07CiAgICBmb250LXdlaWdodDogNzAwOwp9CgojcG9wdXBDbG9zZSB7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7CiAgICBib3JkZXI6IDA7CiAgICBjb2xvcjogd2hpdGU7CiAgICBmb250LXNpemU6IDEuMjVyZW07CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBwYWRkaW5nOiAwLjVyZW07CiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMpOwogICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKTsKICAgIGxpbmUtaGVpZ2h0OiAxOwogICAgd2lkdGg6IDM2cHg7CiAgICBoZWlnaHQ6IDM2cHg7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDIwcHgpOwp9CgojcG9wdXBDbG9zZTpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7CiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7Cn0KCiNwb3B1cEJvZHkgewogICAgcGFkZGluZzogMS41cmVtOwogICAgb3ZlcmZsb3cteTogYXV0bzsKICAgIGNvbG9yOiB2YXIoLS10ZXh0KTsKfQoKI3BvcHVwQm9keSBpbnB1dFt0eXBlPSJ0ZXh0Il0sCiNwb3B1cEJvZHkgaW5wdXRbdHlwZT0iZmlsZSJdIHsKICAgIHdpZHRoOiAxMDAlOwogICAgcGFkZGluZzogMC44NzVyZW0gMXJlbTsKICAgIG1hcmdpbi1ib3R0b206IDEuMjVyZW07CiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOwogICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzKTsKICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXNlY29uZGFyeSk7CiAgICBjb2xvcjogdmFyKC0tdGV4dCk7CiAgICBmb250LXNpemU6IDE1cHg7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOwogICAgb3V0bGluZTogbm9uZTsKfQoKI3BvcHVwQm9keSBpbnB1dFt0eXBlPSJ0ZXh0Il06Zm9jdXMsCiNwb3B1cEJvZHkgaW5wdXRbdHlwZT0iZmlsZSJdOmZvY3VzIHsKICAgIGJvcmRlci1jb2xvcjogdmFyKC0tcHJpbWFyeSk7CiAgICBib3gtc2hhZG93OiAwIDAgMCAzcHggcmdiYSgyNTIsIDM4LCA4MSwgMC4xKTsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTsKfQoKZm9vdGVyIHsKICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLXNlY29uZGFyeSk7CiAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgIHBhZGRpbmc6IDFyZW0gMXJlbTsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKCiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICBib3R0b206IDA7CiAgICBsZWZ0OiAwOwogICAgd2lkdGg6IDEwMCU7CiAgICB6LWluZGV4OiAxMDA7Cn0KCi5mb290ZXItbGlua3MgewogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgZ2FwOiAycmVtOwogICAgZmxleC13cmFwOiB3cmFwOwp9CgouZm9vdGVyLWxpbmtzIGEgewogICAgY29sb3I6IHZhcigtLXByaW1hcnkpOwogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIGZvbnQtc2l6ZTogMTVweDsKICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7CiAgICBwYWRkaW5nOiAwLjVyZW0gMXJlbTsKICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cyk7Cn0KCi5mb290ZXItbGlua3MgYTpob3ZlciB7CiAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1ob3Zlcik7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5LWxpZ2h0KTsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTsKfQoKQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7CiAgICAuaGVhZGVyLWNvbnRlbnQgewogICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgZ2FwOiAxcmVtOwogICAgICAgIHBhZGRpbmc6IDFyZW07CiAgICB9CgogICAgLnNlYXJjaC1jb250YWluZXIgewogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIG1heC13aWR0aDogbm9uZTsKICAgIH0KCiAgICBtYWluIHsKICAgICAgICBwYWRkaW5nOiAxLjVyZW0gMXJlbTsKICAgIH0KCiAgICAjY29udGFpbmVyLAogICAgI2ZlYXR1cmVkWm9uZXMgewogICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDE2MHB4LCAxZnIpKTsKICAgICAgICBnYXA6IDEuMjVyZW07CiAgICB9CgogICAgLnpvbmUtaXRlbSBidXR0b24gewogICAgICAgIHBhZGRpbmc6IDFyZW0gMC43NXJlbTsKICAgICAgICBtaW4taGVpZ2h0OiA2NXB4OwogICAgICAgIGZvbnQtc2l6ZTogMTNweDsKICAgIH0KCiAgICAuZm9vdGVyLWxpbmtzIHsKICAgICAgICBnYXA6IDEuNXJlbTsKICAgIH0KfQoKQG1lZGlhIChtYXgtd2lkdGg6IDQ4MHB4KSB7CiAgICAjY29udGFpbmVyLAogICAgI2ZlYXR1cmVkWm9uZXMgewogICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDE0MHB4LCAxZnIpKTsKICAgICAgICBnYXA6IDFyZW07CiAgICB9CgogICAgLnBvcHVwIHsKICAgICAgICBtYXJnaW46IDAuNXJlbTsKICAgIH0KCiAgICAuem9uZS1pdGVtOmhvdmVyIHsKICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwcHgpIHNjYWxlKDEuMDEpOwogICAgfQoKfQouY29udHJvbC1idXR0b24gaW1nIHsKICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjRzIGVhc2U7CiAgICB3aWR0aDogMjRweDsKICAgIGhlaWdodDogMjRweDsKfQoKLmNvbnRyb2wtYnV0dG9uOmhvdmVyIGltZyB7CiAgICB0cmFuc2Zvcm06IHJvdGF0ZSg0MGRlZyk7Cn0KCi5jb250cm9sLWJ1dHRvbiwKLmNvbnRyb2wtYnV0dG9uOmhvdmVyIHsKICAgIGJveC1zaGFkb3c6IG5vbmU7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7CiAgICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctbGcpOwp9Ci5jb250cm9sLWJ1dHRvbjphY3RpdmUgewogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOwp9CgouY29udHJvbC1idXR0b25zIGJ1dHRvbiB7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7CiAgICBib3JkZXI6IDA7CiAgICBjb2xvcjogd2hpdGU7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBwYWRkaW5nOiAwOwogICAgd2lkdGg6IDQ0cHg7CiAgICBoZWlnaHQ6IDQ0cHg7CiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMpOwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigyMHB4KTsKfQouY29udHJvbC1idXR0b25zIGJ1dHRvbjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7Cn0KLnNldHRpbmdzLWJ1dHRvbiB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1ncmFkaWVudC1wcmltYXJ5KTsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIGJvcmRlcjogMDsKICAgIHBhZGRpbmc6IDAuODc1cmVtIDEuNXJlbTsKICAgIGZvbnQtc2l6ZTogMTVweDsKICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMpOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKTsKICAgIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy1zbSk7CiAgICBtaW4td2lkdGg6IDIwMHB4OwogICAgd2lkdGg6IDEwMCU7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi5zZXR0aW5ncy1idXR0b246aG92ZXIgewogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpOwogICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LWxnKTsKfQoKLnNldHRpbmdzLWJ1dHRvbjphY3RpdmUgewogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOwogICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LXNtKTsKfQoKLmluZm8tYnV0dG9uIHsKICAgIGJhY2tncm91bmQ6IG5vbmU7CiAgICBib3JkZXI6IG5vbmU7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBwYWRkaW5nOiAwOwogICAgbWFyZ2luLWxlZnQ6IDEwcHg7CiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIHdpZHRoOiAyNHB4OwogICAgaGVpZ2h0OiAyNHB4OwogICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzLCB0cmFuc2Zvcm0gMC4yczsKICAgIGNvbG9yOiBpbmhlcml0OwogICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKfQoKLmluZm8tYnV0dG9uOmhvdmVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTsKfQoKLmluZm8tYnV0dG9uOmFjdGl2ZSB7CiAgICB0cmFuc2Zvcm06IHNjYWxlKDAuOTUpOwp9CgouaW5mby1idXR0b24gc3ZnIHsKICAgIGRpc3BsYXk6IGJsb2NrOwp9CiAgICA8L3N0eWxlPgogICAgPGxpbmsgcmVsPSJtYW5pZmVzdCIgaHJlZj0ibWFuaWZlc3QuanNvbiI+CiAgICA8bWV0YSBuYW1lPSJ0aGVtZS1jb2xvciIgY29udGVudD0iI2ZiMjY1MSI+CjwvaGVhZD4KPGJvZHkgY2xhc3M9ImRhcmstbW9kZSI+CiAgICA8aGVhZGVyPgogICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1jb250ZW50Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibG9nbyI+Z24tbWF0aDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZWFyY2gtY29udGFpbmVyIj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic2VhcmNoQmFyIiBwbGFjZWhvbGRlcj0iU2VhcmNoIHpvbmVzLi4uIiBvbmlucHV0PSJmaWx0ZXJab25lcygpIj4KICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InNvcnRPcHRpb25zIiBvbmNoYW5nZT0ic29ydFpvbmVzKCkiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Im5hbWUiPk5hbWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJpZCI+SUQgKERhdGUpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0icG9wdWxhciI+UG9wdWxhcjwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJmaWx0ZXJPcHRpb25zIiBvbmNoYW5nZT0iZmlsdGVyWm9uZXMyKCkiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Im5vbmUiPihTRUxFQ1QgVEFHKTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb250cm9sLWJ1dHRvbnMiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0icmVmcmVzaCIgY2xhc3M9ImNvbnRyb2wtYnV0dG9uIiB0aXRsZT0iUmVmcmVzaCBhbGwgdGhlIHpvbmVzIiBvbmNsaWNrPSJsaXN0Wm9uZXMoKSI+CiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9InJlZnJlc2gtaWNvbi5wbmciIGFsdD0icmVmcmVzaCI+CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJzZXR0aW5ncyIgY2xhc3M9ImNvbnRyb2wtYnV0dG9uIiB0aXRsZT0iU2V0dGluZ3MhIj4KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0ic2V0dGluZy5wbmciIGFsdD0ic2V0dGluZ3MiPgogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9oZWFkZXI+Cgk8bWFpbj4KICAgIDxkaXYgc3R5bGU9ImhlaWdodDo5MHB4OyBwb3NpdGlvbjpzdGlja3k7Ij4KPC9kaXY+CiAgICA8YnI+CiAgICAgICAgPGRldGFpbHMgaWQ9ImZlYXR1cmVkWm9uZXNXcmFwcGVyIiBvcGVuPgogICAgICAgICAgICA8c3VtbWFyeSBpZD0iYWxsWm9uZXNTdW1tYXJ5IiBzdHlsZT0iZm9udC1zaXplOiAxLjJyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7Ij5GZWF0dXJlZCBab25lczwvc3VtbWFyeT4KICAgICAgICAgICAgPGRpdiBpZD0iZmVhdHVyZWRab25lcyIgY2xhc3M9InpvbmUtY29udGFpbmVyIj48L2Rpdj4KICAgICAgICA8L2RldGFpbHM+CiAgICAgICAgPGJyPjxocj48YnI+CiAgICAgICAgPGRldGFpbHMgaWQ9ImFsbFpvbmVzV3JhcHBlciIgb3Blbj4KICAgICAgICAgICAgPHN1bW1hcnkgaWQ9ImFsbFN1bW1hcnkiIHN0eWxlPSJmb250LXNpemU6IDEuMnJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsiPkFsbCBab25lczwvc3VtbWFyeT4KICAgICAgICAgICAgPGRpdiBpZD0iY29udGFpbmVyIj5Mb2FkaW5nLi4uPC9kaXY+CiAgICAgICAgPC9kZXRhaWxzPgogICAgPC9tYWluPgoKICAgICA8ZGl2IGlkPSJ6b25lVmlld2VyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJ6b25lLWhlYWRlciI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InpvbmUtdGl0bGUiPgogICAgICAgICAgICAgICAgPGgyIGlkPSJ6b25lTmFtZSI+em9uZTwvaDI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJpbmZvLWJ1dHRvbiIgb25jbGljaz0ic2hvd1pvbmVJbmZvKCkiIHRpdGxlPSJab25lIEluZm9ybWF0aW9uIj4KICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmUgeDE9IjEyIiB5MT0iMTYiIHgyPSIxMiIgeTI9IjEyIj48L2xpbmU+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsaW5lIHgxPSIxMiIgeTE9IjgiIHgyPSIxMi4wMSIgeTI9IjgiPjwvbGluZT4KICAgICAgICAgICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPHNwYW4gaWQ9InpvbmVJZCIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij48L3NwYW4+CiAgICAgICAgICAgICAgICA8YSBpZD0iem9uZUF1dGhvciIgaHJlZj0iIyIgdGFyZ2V0PSJfYmxhbmsiPmJ5IEF1dGhvcjwvYT4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InpvbmUtY29udHJvbHMiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJmdWxsc2NyZWVuWm9uZSgpIj5GdWxsc2NyZWVuPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImFib3V0QmxhbmsoKSI+T3BlbiBpbiBOZXcgVGFiPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImRvd25sb2FkWm9uZSgpIj5Eb3dubG9hZDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJjbG9zZVpvbmUoKSI+Q2xvc2U8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGlmcmFtZSBpZD0iem9uZUZyYW1lIj48L2lmcmFtZT4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9InBvcHVwT3ZlcmxheSI+CiAgICAgICAgPGRpdiBjbGFzcz0icG9wdXAiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwb3B1cC1oZWFkZXIiPgogICAgICAgICAgICAgICAgPGgzIGlkPSJwb3B1cFRpdGxlIj5UaXRsZTwvaDM+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJwb3B1cENsb3NlIiBvbmNsaWNrPSJjbG9zZVBvcHVwKCkiPsOXPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGlkPSJwb3B1cEJvZHkiPgogICAgICAgICAgICAgICAgQ29udGVudCB3aWxsIGJlIGhlcmUKICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGNsYXNzPSJmb290ZXItbGlua3MiPgogICAgICAgICAgICA8YSBocmVmPSIjIiBvbmNsaWNrPSJsb2FkRE1DQSgpOyByZXR1cm4gZmFsc2U7Ij5ETUNBPC9hPgogICAgICAgICAgICA8YSBocmVmPSIjIiBvbmNsaWNrPSJzaG93Q29udGFjdCgpOyByZXR1cm4gZmFsc2U7Ij5Db250YWN0PC9hPgogICAgICAgICAgICA8YSBocmVmPSIjIiBvbmNsaWNrPSJsb2FkUHJpdmFjeSgpOyByZXR1cm4gZmFsc2U7Ij5Qcml2YWN5IFBvbGljeTwvYT4KICAgICAgICAgICAgPGEgaHJlZj0iamF2YXNjcmlwdDpzYXZlRGF0YSgpIj5FeHBvcnQgRGF0YTwvYT4KICAgICAgICAgICAgPGEgaHJlZj0iIyIgb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltcG9ydERhdGEnKS5jbGljaygpOyByZXR1cm4gZmFsc2U7Ij5JbXBvcnQgRGF0YTwvYT4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJpbXBvcnREYXRhIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiIG9uY2hhbmdlPSJsb2FkRGF0YShldmVudCkiPgogICAgICAgIDwvZGl2PgogICAgPC9mb290ZXI+CgogICAgPHNjcmlwdD4KY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpOwpjb25zdCB6b25lVmlld2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pvbmVWaWV3ZXInKTsKbGV0IHpvbmVGcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd6b25lRnJhbWUnKTsKY29uc3Qgc2VhcmNoQmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaEJhcicpOwpjb25zdCBzb3J0T3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3J0T3B0aW9ucycpOwpjb25zdCBmaWx0ZXJPcHRpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlck9wdGlvbnMnKTsKLy8gaHR0cHM6Ly93d3cuanNkZWxpdnIuY29tL3Rvb2xzL3B1cmdlCmNvbnN0IHpvbmVzdXJscyA9IFsKICAgICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvJTY3JTY4LyU2NyU2ZSUyZCU2ZCU2MSU3NCU2OC8lNjElNzMlNzMlNjUlNzQlNzNAJTZkJTYxJTY5JTZlLyU3YSU2ZiU2ZSU2NSU3MyUyZSU2YSU3MyU2ZiU2ZSIsCiAgICAiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2duLW1hdGgvYXNzZXRzQGxhdGVzdC96b25lcy5qc29uIiwKICAgICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ24tbWF0aC9hc3NldHNAbWFzdGVyL3pvbmVzLmpzb24iLAogICAgImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9nbi1tYXRoL2Fzc2V0cy96b25lcy5qc29uIgpdOwpsZXQgem9uZXNVUkwgPSB6b25lc3VybHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogem9uZXN1cmxzLmxlbmd0aCldOwpjb25zdCBjb3ZlclVSTCA9ICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ24tbWF0aC9jb3ZlcnNAbWFpbiI7CmNvbnN0IGh0bWxVUkwgPSAiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2duLW1hdGgvaHRtbEBtYWluIjsKbGV0IHpvbmVzID0gW107CmxldCBwb3B1bGFyaXR5RGF0YSA9IHt9Owpjb25zdCBmZWF0dXJlZENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmZWF0dXJlZFpvbmVzJyk7CmZ1bmN0aW9uIHRvVGl0bGVDYXNlKHN0cikgewogIHJldHVybiBzdHIucmVwbGFjZSgKICAgIC9cd1xTKi9nLAogICAgdGV4dCA9PiB0ZXh0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGV4dC5zdWJzdHJpbmcoMSkudG9Mb3dlckNhc2UoKQogICk7Cn0KYXN5bmMgZnVuY3Rpb24gbGlzdFpvbmVzKCkgewogICAgdHJ5IHsKICAgICAgbGV0IHNoYXJlc3BvbnNlOwogICAgICBsZXQgc2hhanNvbjsKICAgICAgbGV0IHNoYTsKICAgICAgICB0cnkgewogICAgICAgICAgc2hhcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9nbi1tYXRoL2Fzc2V0cy9jb21taXRzP3Q9IitEYXRlLm5vdygpKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikge30KICAgICAgICBpZiAoc2hhcmVzcG9uc2UgJiYgc2hhcmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHNoYWpzb24gPSBhd2FpdCBzaGFyZXNwb25zZS5qc29uKCk7CiAgICAgICAgICAgIHNoYSA9IHNoYWpzb25bMF1bJ3NoYSddOwogICAgICAgICAgICBpZiAoc2hhKSB7CiAgICAgICAgICAgICAgICB6b25lc1VSTCA9IGBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ24tbWF0aC9hc3NldHNAJHtzaGF9L3pvbmVzLmpzb25gOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbGV0IHNlY29uZGFyeXNoYXJlc3BvbnNlID0gYXdhaXQgZmV0Y2goImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9nbi1tYXRoL3htbC9yZWZzL2hlYWRzL21haW4vc2hhLnR4dD90PSIrRGF0ZS5ub3coKSk7CiAgICAgICAgICAgICAgICBpZiAoc2Vjb25kYXJ5c2hhcmVzcG9uc2UgJiYgc2Vjb25kYXJ5c2hhcmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICBzaGEgPSAoYXdhaXQgc2Vjb25kYXJ5c2hhcmVzcG9uc2UudGV4dCgpKS50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNoYSkgewogICAgICAgICAgICAgICAgICAgICAgICB6b25lc1VSTCA9IGBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ24tbWF0aC9hc3NldHNAJHtzaGF9L3pvbmVzLmpzb25gOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaChlcnJvcikge30KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh6b25lc1VSTCsiP3Q9IitEYXRlLm5vdygpKTsKICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgICAgIHpvbmVzID0ganNvbjsKICAgICAgICB6b25lc1swXS5mZWF0dXJlZCA9IHRydWU7IC8vIGFsd2F5cyBnb25uYSBiZSB0aGUgZGlzY29yZAogICAgICAgIGF3YWl0IGZldGNoUG9wdWxhcml0eSgpOwogICAgICAgIHNvcnRab25lcygpOwogICAgICAgIHRyeSB7CiAgICAgICAgY29uc3Qgc2VhcmNoID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTsKICAgICAgICBjb25zdCBpZCA9IHNlYXJjaC5nZXQoJ2lkJyk7CiAgICAgICAgY29uc3QgZW1iZWQgPSB3aW5kb3cubG9jYXRpb24uaGFzaC5pbmNsdWRlcygiZW1iZWQiKTsKICAgICAgICBpZiAoaWQpIHsKICAgICAgICAgICAgY29uc3Qgem9uZSA9IHpvbmVzLmZpbmQoem9uZSA9PiB6b25lLmlkICsgJycgPT0gaWQgKyAnJyk7CiAgICAgICAgICAgIGlmICh6b25lKSB7CiAgICAgICAgICAgICAgICBpZiAoZW1iZWQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoem9uZS51cmwuc3RhcnRzV2l0aCgiaHR0cCIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKHpvbmUudXJsLCAiX2JsYW5rIik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXJsID0gem9uZS51cmwucmVwbGFjZSgie0NPVkVSX1VSTH0iLCBjb3ZlclVSTCkucmVwbGFjZSgie0hUTUxfVVJMfSIsIGh0bWxVUkwpOwogICAgICAgICAgICAgICAgICAgICAgICBmZXRjaCh1cmwrIj90PSIrRGF0ZS5ub3coKSkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpLnRoZW4oaHRtbCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cC5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cC5zdHlsZS5ib3R0b20gPSAiMjBweCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cC5zdHlsZS5yaWdodCA9ICIyMHB4IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjY2NlNWZmIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLnN0eWxlLmNvbG9yID0gIiMwMDQwODUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXAuc3R5bGUucGFkZGluZyA9ICIxMHB4IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLnN0eWxlLmJvcmRlciA9ICIxcHggc29saWQgI2I4ZGFmZiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cC5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiNXB4IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLnN0eWxlLmJveFNoYWRvdyA9ICIwcHggMHB4IDEwcHggcmdiYSgwLDAsMCwwLjEpIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLnN0eWxlLmZvbnRGYW1pbHkgPSAiQXJpYWwsIHNhbnMtc2VyaWYiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cC5pbm5lckhUTUwgPSBgUGxheSBtb3JlIGdhbWVzIGF0IDxhIGhyZWY9Imh0dHBzOi8vZ24tbWF0aC5naXRodWIuaW8iIHRhcmdldD0iX2JsYW5rIiBzdHlsZT0iY29sb3I6IzAwNDA4NTsgZm9udC13ZWlnaHQ6Ym9sZDsiPmh0dHBzOi8vZ24tbWF0aC5naXRodWIuaW88L2E+IWA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUJ0bi5pbm5lclRleHQgPSAiPyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUJ0bi5zdHlsZS5tYXJnaW5MZWZ0ID0gIjEwcHgiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VCdG4uc3R5bGUuYmFja2dyb3VuZCA9ICJub25lIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlQnRuLnN0eWxlLmJvcmRlciA9ICJub25lIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlQnRuLnN0eWxlLmN1cnNvciA9ICJwb2ludGVyIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlQnRuLnN0eWxlLmNvbG9yID0gIiMwMDQwODUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VCdG4uc3R5bGUuZm9udFdlaWdodCA9ICJib2xkIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VCdG4ub25jbGljayA9ICgpID0+IHBvcHVwLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXAuYXBwZW5kQ2hpbGQoY2xvc2VCdG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwb3B1cCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0JykuZm9yRWFjaChvbGRTY3JpcHQgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1NjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGRTY3JpcHQuc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NjcmlwdC5zcmMgPSBvbGRTY3JpcHQuc3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NjcmlwdC50ZXh0Q29udGVudCA9IG9sZFNjcmlwdC50ZXh0Q29udGVudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChuZXdTY3JpcHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IGFsZXJ0KCJGYWlsZWQgdG8gbG9hZCB6b25lOiAiICsgZXJyb3IpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG9wZW5ab25lKHpvbmUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIH0gY2F0Y2goZXJyb3Ipe30KICAgICAgICBsZXQgYWxsdGFncyA9IFtdOwogICAgICAgIGZvciAoY29uc3Qgb2JqIG9mIGpzb24pIHsKICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqLnNwZWNpYWwpKSB7CiAgICAgICAgICAgICAgICBhbGx0YWdzLnB1c2goLi4ub2JqLnNwZWNpYWwpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBhbGx0YWdzID0gWy4uLm5ldyBTZXQoYWxsdGFncyldOwogICAgICAgIGxldCBmaWx0ZXJvcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZmlsdGVyT3B0aW9ucyIpOwogICAgICAgIGlmIChmaWx0ZXJvcHRpb24gJiYgZmlsdGVyb3B0aW9uLmNoaWxkcmVuLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgd2hpbGUgKGZpbHRlcm9wdGlvbi5jaGlsZHJlbi5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICBmaWx0ZXJvcHRpb24ucmVtb3ZlQ2hpbGQoZmlsdGVyb3B0aW9uLmxhc3RFbGVtZW50Q2hpbGQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZvciAoY29uc3QgdGFnIG9mIGFsbHRhZ3MpIHsKICAgICAgICAgICAgY29uc3Qgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7CiAgICAgICAgICAgIG9wdC52YWx1ZSA9IHRhZzsKICAgICAgICAgICAgb3B0LnRleHRDb250ZW50ID0gdG9UaXRsZUNhc2UodGFnKTsKICAgICAgICAgICAgZmlsdGVyb3B0aW9uLmFwcGVuZENoaWxkKG9wdCk7CiAgICAgICAgfQogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYEVycm9yIGxvYWRpbmcgem9uZXM6ICR7ZXJyb3J9YDsKICAgIH0KfQphc3luYyBmdW5jdGlvbiBmZXRjaFBvcHVsYXJpdHkoKSB7CiAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goImh0dHBzOi8vZGF0YS5qc2RlbGl2ci5jb20vdjEvc3RhdHMvcGFja2FnZXMvZ2gvZ24tbWF0aC9odG1sQG1haW4vZmlsZXM/cGVyaW9kPXllYXIiKTsKICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgICAgIGRhdGEuZm9yRWFjaChmaWxlID0+IHsKICAgICAgICAgICAgY29uc3QgaWRNYXRjaCA9IGZpbGUubmFtZS5tYXRjaCgvXC8oXGQrKVwuaHRtbCQvKTsKICAgICAgICAgICAgaWYgKGlkTWF0Y2gpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gcGFyc2VJbnQoaWRNYXRjaFsxXSk7CiAgICAgICAgICAgICAgICBwb3B1bGFyaXR5RGF0YVtpZF0gPSBmaWxlLmhpdHMudG90YWw7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgcG9wdWxhcml0eURhdGFbMF0gPSAwOwogICAgfQp9CgpmdW5jdGlvbiBzb3J0Wm9uZXMoKSB7CiAgICBjb25zdCBzb3J0QnkgPSBzb3J0T3B0aW9ucy52YWx1ZTsKICAgIGlmIChzb3J0QnkgPT09ICduYW1lJykgewogICAgICAgIHpvbmVzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpOwogICAgfSBlbHNlIGlmIChzb3J0QnkgPT09ICdpZCcpIHsKICAgICAgICB6b25lcy5zb3J0KChhLCBiKSA9PiBhLmlkIC0gYi5pZCk7CiAgICB9IGVsc2UgaWYgKHNvcnRCeSA9PT0gJ3BvcHVsYXInKSB7CiAgICAgICAgem9uZXMuc29ydCgoYSwgYikgPT4gKHBvcHVsYXJpdHlEYXRhW2IuaWRdIHx8IDApIC0gKHBvcHVsYXJpdHlEYXRhW2EuaWRdIHx8IDApKTsKICAgIH0KICAgIHpvbmVzLnNvcnQoKGEsIGIpID0+IChhLmlkID09PSAtMSA/IC0xIDogYi5pZCA9PT0gLTEgPyAxIDogMCkpOwogICAgaWYgKGZlYXR1cmVkQ29udGFpbmVyLmlubmVySFRNTCA9PT0gIiIpIHsKICAgICAgICBjb25zdCBmZWF0dXJlZCA9IHpvbmVzLmZpbHRlcih6ID0+IHouZmVhdHVyZWQpOwogICAgICAgIGRpc3BsYXlGZWF0dXJlZFpvbmVzKGZlYXR1cmVkKTsKICAgIH0KICAgIGRpc3BsYXlab25lcyh6b25lcyk7Cn0KCmZ1bmN0aW9uIGRpc3BsYXlGZWF0dXJlZFpvbmVzKGZlYXR1cmVkWm9uZXMpIHsKICAgIGZlYXR1cmVkQ29udGFpbmVyLmlubmVySFRNTCA9ICIiOwogICAgZmVhdHVyZWRab25lcy5mb3JFYWNoKChmaWxlLCBpbmRleCkgPT4gewogICAgICAgIGNvbnN0IHpvbmVJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgem9uZUl0ZW0uY2xhc3NOYW1lID0gInpvbmUtaXRlbSI7CiAgICAgICAgem9uZUl0ZW0ub25jbGljayA9ICgpID0+IG9wZW5ab25lKGZpbGUpOwogICAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgICAgIGltZy5kYXRhc2V0LnNyYyA9IGZpbGUuY292ZXIucmVwbGFjZSgie0NPVkVSX1VSTH0iLCBjb3ZlclVSTCkucmVwbGFjZSgie0hUTUxfVVJMfSIsIGh0bWxVUkwpOwogICAgICAgIGltZy5hbHQgPSBmaWxlLm5hbWU7CiAgICAgICAgaW1nLmxvYWRpbmcgPSAibGF6eSI7CiAgICAgICAgaW1nLmNsYXNzTmFtZSA9ICJsYXp5LXpvbmUtaW1nIjsKICAgICAgICB6b25lSXRlbS5hcHBlbmRDaGlsZChpbWcpOwogICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwogICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGZpbGUubmFtZTsKICAgICAgICBidXR0b24ub25jbGljayA9IChldmVudCkgPT4gewogICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgb3BlblpvbmUoZmlsZSk7CiAgICAgICAgfTsKICAgICAgICB6b25lSXRlbS5hcHBlbmRDaGlsZChidXR0b24pOwogICAgICAgIGZlYXR1cmVkQ29udGFpbmVyLmFwcGVuZENoaWxkKHpvbmVJdGVtKTsKICAgIH0pOwogICAgaWYgKGZlYXR1cmVkQ29udGFpbmVyLmlubmVySFRNTCA9PT0gIiIpIHsKICAgICAgICBmZWF0dXJlZENvbnRhaW5lci5pbm5lckhUTUwgPSAiTm8gZmVhdHVyZWQgem9uZXMgZm91bmQuIjsKICAgIH0gZWxzZSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFsbFpvbmVzU3VtbWFyeSIpLnRleHRDb250ZW50ID0gYEZlYXR1cmVkIFpvbmVzICgke2ZlYXR1cmVkWm9uZXMubGVuZ3RofSlgOwogICAgfQoKICAgIGNvbnN0IGxhenlJbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjZmVhdHVyZWRab25lcyBpbWcubGF6eS16b25lLWltZycpOwogICAgY29uc3QgaW1hZ2VPYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcywgb2JzZXJ2ZXIpID0+IHsKICAgICAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4gewogICAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcgJiYgIXpvbmVWaWV3ZXIuaGlkZGVuKSB7CiAgICAgICAgICAgICAgICBjb25zdCBpbWcgPSBlbnRyeS50YXJnZXQ7CiAgICAgICAgICAgICAgICBpbWcuc3JjID0gaW1nLmRhdGFzZXQuc3JjOwogICAgICAgICAgICAgICAgaW1nLmNsYXNzTGlzdC5yZW1vdmUoImxhenktem9uZS1pbWciKTsKICAgICAgICAgICAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShpbWcpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LCB7CiAgICAgICAgcm9vdE1hcmdpbjogIjEwMHB4IiwgCiAgICAgICAgdGhyZXNob2xkOiAwLjEKICAgIH0pOwoKICAgIGxhenlJbWFnZXMuZm9yRWFjaChpbWcgPT4gewogICAgICAgIGltYWdlT2JzZXJ2ZXIub2JzZXJ2ZShpbWcpOwogICAgfSk7Cn0KZnVuY3Rpb24gZGlzcGxheVpvbmVzKHpvbmVzKSB7CiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gIiI7CiAgICB6b25lcy5mb3JFYWNoKChmaWxlLCBpbmRleCkgPT4gewogICAgICAgIGNvbnN0IHpvbmVJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgem9uZUl0ZW0uY2xhc3NOYW1lID0gInpvbmUtaXRlbSI7CiAgICAgICAgem9uZUl0ZW0ub25jbGljayA9ICgpID0+IG9wZW5ab25lKGZpbGUpOwogICAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgICAgIGltZy5kYXRhc2V0LnNyYyA9IGZpbGUuY292ZXIucmVwbGFjZSgie0NPVkVSX1VSTH0iLCBjb3ZlclVSTCkucmVwbGFjZSgie0hUTUxfVVJMfSIsIGh0bWxVUkwpOwogICAgICAgIGltZy5hbHQgPSBmaWxlLm5hbWU7CiAgICAgICAgaW1nLmxvYWRpbmcgPSAibGF6eSI7CiAgICAgICAgaW1nLmNsYXNzTmFtZSA9ICJsYXp5LXpvbmUtaW1nIjsKICAgICAgICB6b25lSXRlbS5hcHBlbmRDaGlsZChpbWcpOwogICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwogICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGZpbGUubmFtZTsKICAgICAgICBidXR0b24ub25jbGljayA9IChldmVudCkgPT4gewogICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgb3BlblpvbmUoZmlsZSk7CiAgICAgICAgfTsKICAgICAgICB6b25lSXRlbS5hcHBlbmRDaGlsZChidXR0b24pOwogICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh6b25lSXRlbSk7ICAgCiAgICB9KTsKICAgIGlmIChjb250YWluZXIuaW5uZXJIVE1MID09PSAiIikgewogICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAiTm8gem9uZXMgZm91bmQuIjsKICAgIH0gZWxzZSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFsbFN1bW1hcnkiKS50ZXh0Q29udGVudCA9IGBBbGwgWm9uZXMgKCR7em9uZXMubGVuZ3RofSlgOwogICAgfQoKICAgIGNvbnN0IGxhenlJbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbWcubGF6eS16b25lLWltZycpOwogICAgY29uc3QgaW1hZ2VPYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcywgb2JzZXJ2ZXIpID0+IHsKICAgICAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4gewogICAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcgJiYgIXpvbmVWaWV3ZXIuaGlkZGVuKSB7CiAgICAgICAgICAgICAgICBjb25zdCBpbWcgPSBlbnRyeS50YXJnZXQ7CiAgICAgICAgICAgICAgICBpbWcuc3JjID0gaW1nLmRhdGFzZXQuc3JjOwogICAgICAgICAgICAgICAgaW1nLmNsYXNzTGlzdC5yZW1vdmUoImxhenktem9uZS1pbWciKTsKICAgICAgICAgICAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShpbWcpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LCB7CiAgICAgICAgcm9vdE1hcmdpbjogIjEwMHB4IiwgCiAgICAgICAgdGhyZXNob2xkOiAwLjEKICAgIH0pOwoKICAgIGxhenlJbWFnZXMuZm9yRWFjaChpbWcgPT4gewogICAgICAgIGltYWdlT2JzZXJ2ZXIub2JzZXJ2ZShpbWcpOwogICAgfSk7Cn0KCmZ1bmN0aW9uIGZpbHRlclpvbmVzMigpIHsKICAgIGNvbnN0IHF1ZXJ5ID0gZmlsdGVyT3B0aW9ucy52YWx1ZTsKICAgIGlmIChxdWVyeSA9PT0gIm5vbmUiKSB7CiAgICAgICAgZGlzcGxheVpvbmVzKHpvbmVzKTsKICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgZmlsdGVyZWRab25lcyA9IHpvbmVzLmZpbHRlcih6b25lID0+IHpvbmUuc3BlY2lhbD8uaW5jbHVkZXMocXVlcnkpKTsKICAgICAgICBpZiAocXVlcnkubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmZWF0dXJlZFpvbmVzV3JhcHBlciIpLnJlbW92ZUF0dHJpYnV0ZSgib3BlbiIpOwogICAgICAgIH0KICAgICAgICBkaXNwbGF5Wm9uZXMoZmlsdGVyZWRab25lcyk7CiAgICB9Cn0KCmZ1bmN0aW9uIGZpbHRlclpvbmVzKCkgewogICAgY29uc3QgcXVlcnkgPSBzZWFyY2hCYXIudmFsdWUudG9Mb3dlckNhc2UoKTsKICAgIGNvbnN0IGZpbHRlcmVkWm9uZXMgPSB6b25lcy5maWx0ZXIoem9uZSA9PiB6b25lLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpOwogICAgaWYgKHF1ZXJ5Lmxlbmd0aCAhPT0gMCkgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmZWF0dXJlZFpvbmVzV3JhcHBlciIpLnJlbW92ZUF0dHJpYnV0ZSgib3BlbiIpOwogICAgfQogICAgZGlzcGxheVpvbmVzKGZpbHRlcmVkWm9uZXMpOwp9CgpmdW5jdGlvbiBvcGVuWm9uZShmaWxlKSB7CiAgICBpZiAoZmlsZS51cmwuc3RhcnRzV2l0aCgiaHR0cCIpKSB7CiAgICAgICAgd2luZG93Lm9wZW4oZmlsZS51cmwsICJfYmxhbmsiKTsKICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgdXJsID0gZmlsZS51cmwucmVwbGFjZSgie0NPVkVSX1VSTH0iLCBjb3ZlclVSTCkucmVwbGFjZSgie0hUTUxfVVJMfSIsIGh0bWxVUkwpOwogICAgICAgIGZldGNoKHVybCsiP3Q9IitEYXRlLm5vdygpKS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLnRleHQoKSkudGhlbihodG1sID0+IHsKICAgICAgICAgICAgaWYgKHpvbmVGcmFtZS5jb250ZW50RG9jdW1lbnQgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHpvbmVGcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpOwogICAgICAgICAgICAgICAgem9uZUZyYW1lLmlkID0gInpvbmVGcmFtZSI7CiAgICAgICAgICAgICAgICB6b25lVmlld2VyLmFwcGVuZENoaWxkKHpvbmVGcmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgem9uZUZyYW1lLmNvbnRlbnREb2N1bWVudC5vcGVuKCk7CiAgICAgICAgICAgIHpvbmVGcmFtZS5jb250ZW50RG9jdW1lbnQud3JpdGUoaHRtbCk7CiAgICAgICAgICAgIHpvbmVGcmFtZS5jb250ZW50RG9jdW1lbnQuY2xvc2UoKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pvbmVOYW1lJykudGV4dENvbnRlbnQgPSBmaWxlLm5hbWU7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd6b25lSWQnKS50ZXh0Q29udGVudCA9IGZpbGUuaWQ7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd6b25lQXV0aG9yJykudGV4dENvbnRlbnQgPSAiYnkgIiArIGZpbGUuYXV0aG9yOwogICAgICAgICAgICBpZiAoZmlsZS5hdXRob3JMaW5rKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnem9uZUF1dGhvcicpLmhyZWYgPSBmaWxlLmF1dGhvckxpbms7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgem9uZVZpZXdlci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24pOwogICAgICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnaWQnLCBmaWxlLmlkKTsKICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgJycsIHVybC50b1N0cmluZygpKTsKICAgICAgICAgICAgfSBjYXRjaChlcnJvcil7fQogICAgICAgICAgICB6b25lVmlld2VyLmhpZGRlbiA9IHRydWU7CiAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gYWxlcnQoIkZhaWxlZCB0byBsb2FkIHpvbmU6ICIgKyBlcnJvcikpOwogICAgfQp9CgpmdW5jdGlvbiBhYm91dEJsYW5rKCkgewogICAgY29uc3QgbmV3V2luZG93ID0gd2luZG93Lm9wZW4oImFib3V0OmJsYW5rIiwgIl9ibGFuayIpOwogICAgbGV0IHpvbmUgPSB6b25lcy5maW5kKHpvbmUgPT4gem9uZS5pZCArICcnID09PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnem9uZUlkJykudGV4dENvbnRlbnQpLnVybC5yZXBsYWNlKCJ7Q09WRVJfVVJMfSIsIGNvdmVyVVJMKS5yZXBsYWNlKCJ7SFRNTF9VUkx9IiwgaHRtbFVSTCk7CiAgICBmZXRjaCh6b25lKyI/dD0iK0RhdGUubm93KCkpLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKS50aGVuKGh0bWwgPT4gewogICAgICAgIGlmIChuZXdXaW5kb3cpIHsKICAgICAgICAgICAgbmV3V2luZG93LmRvY3VtZW50Lm9wZW4oKTsKICAgICAgICAgICAgbmV3V2luZG93LmRvY3VtZW50LndyaXRlKGh0bWwpOwogICAgICAgICAgICBuZXdXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTsKICAgICAgICB9CiAgICB9KQp9CgpmdW5jdGlvbiBjbG9zZVpvbmUoKSB7CiAgICB6b25lVmlld2VyLmhpZGRlbiA9IGZhbHNlOwogICAgem9uZVZpZXdlci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgem9uZVZpZXdlci5yZW1vdmVDaGlsZCh6b25lRnJhbWUpOwogICAgdHJ5IHsKICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uKTsKICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKCdpZCcpOwogICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgJycsIHVybC50b1N0cmluZygpKTsKICAgIH0gY2F0Y2goZXJyb3Ipe30KfQoKZnVuY3Rpb24gZG93bmxvYWRab25lKCkgewogICAgbGV0IHpvbmUgPSB6b25lcy5maW5kKHpvbmUgPT4gem9uZS5pZCArICcnID09PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnem9uZUlkJykudGV4dENvbnRlbnQpOwogICAgZmV0Y2goem9uZS51cmwucmVwbGFjZSgie0hUTUxfVVJMfSIsIGh0bWxVUkwpKyI/dD0iK0RhdGUubm93KCkpLnRoZW4ocmVzID0+IHJlcy50ZXh0KCkpLnRoZW4odGV4dCA9PiB7CiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFt0ZXh0XSwgewogICAgICAgICAgICB0eXBlOiAidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04IgogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhLmhyZWYgPSB1cmw7CiAgICAgICAgYS5kb3dubG9hZCA9IHpvbmUubmFtZSArICIuaHRtbCI7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTsKICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7CiAgICB9KTsKfQoKZnVuY3Rpb24gZnVsbHNjcmVlblpvbmUoKSB7CiAgICBpZiAoem9uZUZyYW1lLnJlcXVlc3RGdWxsc2NyZWVuKSB7CiAgICAgICAgem9uZUZyYW1lLnJlcXVlc3RGdWxsc2NyZWVuKCk7CiAgICB9IGVsc2UgaWYgKHpvbmVGcmFtZS5tb3pSZXF1ZXN0RnVsbFNjcmVlbikgewogICAgICAgIHpvbmVGcmFtZS5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpOwogICAgfSBlbHNlIGlmICh6b25lRnJhbWUud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIHsKICAgICAgICB6b25lRnJhbWUud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oKTsKICAgIH0gZWxzZSBpZiAoem9uZUZyYW1lLm1zUmVxdWVzdEZ1bGxzY3JlZW4pIHsKICAgICAgICB6b25lRnJhbWUubXNSZXF1ZXN0RnVsbHNjcmVlbigpOwogICAgfQp9CgpmdW5jdGlvbiBzYW5pdGl6ZURhdGEob2JqLCBtYXhTdHJpbmdMZW4gPSAxMDAwLCBtYXhBcnJheUxlbiA9IDEwMDAwKSB7CiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHsKICAgICAgcmV0dXJuIG9iai5sZW5ndGggPiBtYXhTdHJpbmdMZW4gPyBvYmouc2xpY2UoMCwgbWF4U3RyaW5nTGVuKSArICcuLi5bdHJ1bmNhdGVkXScgOiBvYmo7CiAgICB9CiAgICAKICAgIGlmIChvYmogaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7CiAgICAgIGlmIChvYmoubGVuZ3RoID4gbWF4QXJyYXlMZW4pIHsKICAgICAgICByZXR1cm4gYFtVaW50OEFycmF5IHRvbyBsYXJnZSAoJHtvYmoubGVuZ3RofSBieXRlcyksIHRydW5jYXRlZF1gOwogICAgICB9CiAgICAgIHJldHVybiBvYmo7CiAgICB9CiAgICAKICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHsKICAgICAgcmV0dXJuIG9iai5tYXAoaXRlbSA9PiBzYW5pdGl6ZURhdGEoaXRlbSwgbWF4U3RyaW5nTGVuLCBtYXhBcnJheUxlbikpOwogICAgfQogICAgCiAgICBpZiAob2JqICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7CiAgICAgIGNvbnN0IG5ld09iaiA9IHt9OwogICAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHsKICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgIG5ld09ialtrZXldID0gc2FuaXRpemVEYXRhKG9ialtrZXldLCBtYXhTdHJpbmdMZW4sIG1heEFycmF5TGVuKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG5ld09iajsKICAgIH0KICAgIAogICAgcmV0dXJuIG9iajsKICB9Cgphc3luYyBmdW5jdGlvbiBzYXZlRGF0YSgpIHsKICAgIGFsZXJ0KCJUaGlzIG1pZ2h0IHRha2UgYSB3aGlsZSwgZG9udCB0b3VjaCBhbnl0aGluZyBvdGhlciB0aGFuIHRoaXMgT0sgYnV0dG9uIik7CiAgICBjb25zdCByZXN1bHQgPSB7fTsKICAgIHJlc3VsdC5jb29raWVzID0gZG9jdW1lbnQuY29va2llOwogICAgcmVzdWx0LmxvY2FsU3RvcmFnZSA9IHsuLi5sb2NhbFN0b3JhZ2V9OwogICAgcmVzdWx0LnNlc3Npb25TdG9yYWdlID0gey4uLnNlc3Npb25TdG9yYWdlfTsKICAgIHJlc3VsdC5pbmRleGVkREIgPSB7fTsKICAgIGNvbnN0IGRicyA9IGF3YWl0IGluZGV4ZWREQi5kYXRhYmFzZXMoKTsKICAgIGZvciAoY29uc3QgZGJJbmZvIG9mIGRicykgewogICAgICBpZiAoIWRiSW5mby5uYW1lKSBjb250aW51ZTsKICAgICAgcmVzdWx0LmluZGV4ZWREQltkYkluZm8ubmFtZV0gPSB7fTsKICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGNvbnN0IG9wZW5SZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oZGJJbmZvLm5hbWUsIGRiSW5mby52ZXJzaW9uKTsKICAgICAgICBvcGVuUmVxdWVzdC5vbmVycm9yID0gKCkgPT4gcmVqZWN0KG9wZW5SZXF1ZXN0LmVycm9yKTsKICAgICAgICBvcGVuUmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7CiAgICAgICAgICBjb25zdCBkYiA9IG9wZW5SZXF1ZXN0LnJlc3VsdDsKICAgICAgICAgIGNvbnN0IHN0b3JlTmFtZXMgPSBBcnJheS5mcm9tKGRiLm9iamVjdFN0b3JlTmFtZXMpOwogICAgICAgICAgaWYgKHN0b3JlTmFtZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbihzdG9yZU5hbWVzLCAicmVhZG9ubHkiKTsKICAgICAgICAgIGNvbnN0IHN0b3JlUHJvbWlzZXMgPSBbXTsKICAgICAgICAgIGZvciAoY29uc3Qgc3RvcmVOYW1lIG9mIHN0b3JlTmFtZXMpIHsKICAgICAgICAgICAgcmVzdWx0LmluZGV4ZWREQltkYkluZm8ubmFtZV1bc3RvcmVOYW1lXSA9IFtdOwogICAgICAgICAgICBjb25zdCBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHN0b3JlTmFtZSk7CiAgICAgICAgICAgIGNvbnN0IGdldEFsbFJlcXVlc3QgPSBzdG9yZS5nZXRBbGwoKTsKICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4gewogICAgICAgICAgICAgIGdldEFsbFJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4gewogICAgICAgICAgICAgICAgcmVzdWx0LmluZGV4ZWREQltkYkluZm8ubmFtZV1bc3RvcmVOYW1lXSA9IHNhbml0aXplRGF0YShnZXRBbGxSZXF1ZXN0LnJlc3VsdCwgMTAwMCwgMTAwKTsKICAgICAgICAgICAgICAgIHJlcygpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgZ2V0QWxsUmVxdWVzdC5vbmVycm9yID0gKCkgPT4gcmVqKGdldEFsbFJlcXVlc3QuZXJyb3IpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc3RvcmVQcm9taXNlcy5wdXNoKHApOwogICAgICAgICAgfQogICAgICAgICAgUHJvbWlzZS5hbGwoc3RvcmVQcm9taXNlcykudGhlbigoKSA9PiByZXNvbHZlKCkpOwogICAgICAgIH07CiAgICAgIH0pOwogICAgfQoKICAgIHJlc3VsdC5jYWNoZXMgPSB7fTsKICAgIGNvbnN0IGNhY2hlTmFtZXMgPSBhd2FpdCBjYWNoZXMua2V5cygpOwogICAgZm9yIChjb25zdCBjYWNoZU5hbWUgb2YgY2FjaGVOYW1lcykgewogICAgICBjb25zdCBjYWNoZSA9IGF3YWl0IGNhY2hlcy5vcGVuKGNhY2hlTmFtZSk7CiAgICAgIGNvbnN0IHJlcXVlc3RzID0gYXdhaXQgY2FjaGUua2V5cygpOwogICAgICByZXN1bHQuY2FjaGVzW2NhY2hlTmFtZV0gPSBbXTsKICAgICAgZm9yIChjb25zdCByZXEgb2YgcmVxdWVzdHMpIHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNhY2hlLm1hdGNoKHJlcSk7CiAgICAgICAgaWYgKCFyZXNwb25zZSkgY29udGludWU7CiAgICAgICAgY29uc3QgY2xvbmVkID0gcmVzcG9uc2UuY2xvbmUoKTsKICAgICAgICBjb25zdCBjb250ZW50VHlwZSA9IGNsb25lZC5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykgfHwgJyc7CiAgICAgICAgbGV0IGJvZHk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmIChjb250ZW50VHlwZS5pbmNsdWRlcygnYXBwbGljYXRpb24vanNvbicpKSB7CiAgICAgICAgICAgIGJvZHkgPSBhd2FpdCBjbG9uZWQuanNvbigpOwogICAgICAgICAgfSBlbHNlIGlmIChjb250ZW50VHlwZS5pbmNsdWRlcygndGV4dCcpIHx8IGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdqYXZhc2NyaXB0JykpIHsKICAgICAgICAgICAgYm9keSA9IGF3YWl0IGNsb25lZC50ZXh0KCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCBjbG9uZWQuYXJyYXlCdWZmZXIoKTsKICAgICAgICAgICAgYm9keSA9IGJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZSguLi5uZXcgVWludDhBcnJheShidWZmZXIpKSk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgYm9keSA9ICdbVW5hYmxlIHRvIHJlYWQgYm9keV0nOwogICAgICAgIH0KICAgICAgICByZXN1bHQuY2FjaGVzW2NhY2hlTmFtZV0ucHVzaCh7CiAgICAgICAgICB1cmw6IHJlcS51cmwsCiAgICAgICAgICBib2R5LAogICAgICAgICAgY29udGVudFR5cGUKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIAogICAgYWxlcnQoIkRvbmUsIHdhaXQgZm9yIHRoZSBkb3dubG9hZCB0byBjb21lIik7CiAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkocmVzdWx0KV0sIHsKICAgICAgICB0eXBlOiAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIgogICAgfSkpOwogICAgbGluay5kb3dubG9hZCA9IGAke0RhdGUubm93KCl9LmRhdGFgOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgIGxpbmsuY2xpY2soKTsKICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7CiAgfQogIAogIGFzeW5jIGZ1bmN0aW9uIGxvYWREYXRhKGV2ZW50KSB7CiAgICBjb25zdCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdOwogICAgaWYgKCFmaWxlKSByZXR1cm47CiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgcmVhZGVyLm9ubG9hZCA9IGFzeW5jIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZS50YXJnZXQucmVzdWx0KTsKICAgICAgICBpZiAoZGF0YS5jb29raWVzKSB7CiAgICAgICAgICAgIGRhdGEuY29va2llcy5zcGxpdCgnOycpLmZvckVhY2goY29va2llID0+IHsKICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWUudHJpbSgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgIGlmIChkYXRhLmxvY2FsU3RvcmFnZSkgewogICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhLmxvY2FsU3RvcmFnZSkgewogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgZGF0YS5sb2NhbFN0b3JhZ2Vba2V5XSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgIGlmIChkYXRhLnNlc3Npb25TdG9yYWdlKSB7CiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEuc2Vzc2lvblN0b3JhZ2UpIHsKICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGtleSwgZGF0YS5zZXNzaW9uU3RvcmFnZVtrZXldKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgaWYgKGRhdGEuaW5kZXhlZERCKSB7CiAgICAgICAgICAgIGZvciAoY29uc3QgZGJOYW1lIGluIGRhdGEuaW5kZXhlZERCKSB7CiAgICAgICAgICAgICAgY29uc3Qgc3RvcmVzID0gZGF0YS5pbmRleGVkREJbZGJOYW1lXTsKICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oZGJOYW1lLCAxKTsKICAgICAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGRiID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN0b3JlTmFtZSBpbiBzdG9yZXMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoc3RvcmVOYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoc3RvcmVOYW1lLCB7IGtleVBhdGg6ICdpZCcsIGF1dG9JbmNyZW1lbnQ6IHRydWUgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBlID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3QgZGIgPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oT2JqZWN0LmtleXMoc3RvcmVzKSwgJ3JlYWR3cml0ZScpOwogICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmVycm9yID0gKCkgPT4gcmVqZWN0KHRyYW5zYWN0aW9uLmVycm9yKTsKICAgICAgICAgICAgICAgICAgbGV0IHBlbmRpbmdTdG9yZXMgPSBPYmplY3Qua2V5cyhzdG9yZXMpLmxlbmd0aDsKICAgICAgICAKICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzdG9yZU5hbWUgaW4gc3RvcmVzKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzdG9yZU5hbWUpOwogICAgICAgICAgICAgICAgICAgIG9iamVjdFN0b3JlLmNsZWFyKCkub25zdWNjZXNzID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHN0b3Jlc1tzdG9yZU5hbWVdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdFN0b3JlLnB1dChpdGVtKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdTdG9yZXMtLTsKICAgICAgICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nU3RvcmVzID09PSAwKSByZXNvbHZlKCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHJlamVjdChyZXF1ZXN0LmVycm9yKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgaWYgKGRhdGEuY2FjaGVzKSB7CiAgICAgICAgICAgIGZvciAoY29uc3QgY2FjaGVOYW1lIGluIGRhdGEuY2FjaGVzKSB7CiAgICAgICAgICAgICAgY29uc3QgY2FjaGUgPSBhd2FpdCBjYWNoZXMub3BlbihjYWNoZU5hbWUpOwogICAgICAgICAgICAgIGF3YWl0IGNhY2hlLmtleXMoKS50aGVuKGtleXMgPT4gUHJvbWlzZS5hbGwoa2V5cy5tYXAoayA9PiBjYWNoZS5kZWxldGUoaykpKSk7IC8vIGNsZWFyIGV4aXN0aW5nCiAgICAgICAgCiAgICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBkYXRhLmNhY2hlc1tjYWNoZU5hbWVdKSB7CiAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2VCb2R5OwogICAgICAgICAgICAgICAgaWYgKGVudHJ5LmNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHsKICAgICAgICAgICAgICAgICAgcmVzcG9uc2VCb2R5ID0gSlNPTi5zdHJpbmdpZnkoZW50cnkuYm9keSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVudHJ5LmNvbnRlbnRUeXBlLmluY2x1ZGVzKCd0ZXh0JykgfHwgZW50cnkuY29udGVudFR5cGUuaW5jbHVkZXMoJ2phdmFzY3JpcHQnKSkgewogICAgICAgICAgICAgICAgICByZXNwb25zZUJvZHkgPSBlbnRyeS5ib2R5OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgY29uc3QgYmluYXJ5U3RyID0gYXRvYihlbnRyeS5ib2R5KTsKICAgICAgICAgICAgICAgICAgY29uc3QgbGVuID0gYmluYXJ5U3RyLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShsZW4pOwogICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgYnl0ZXNbaV0gPSBiaW5hcnlTdHIuY2hhckNvZGVBdChpKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICByZXNwb25zZUJvZHkgPSBieXRlcy5idWZmZXI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnY29udGVudC10eXBlJzogZW50cnkuY29udGVudFR5cGUgfSk7CiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IG5ldyBSZXNwb25zZShyZXNwb25zZUJvZHksIHsgaGVhZGVycyB9KTsKICAgICAgICAgICAgICAgIGF3YWl0IGNhY2hlLnB1dChlbnRyeS51cmwsIHJlc3BvbnNlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICBhbGVydCgiRGF0YSBsb2FkZWQiKTsKICAgIH07CiAgICBhbGVydCgiVGhpcyBtaWdodCB0YWtlIGEgd2hpbGUsIGRvbnQgdG91Y2ggYW55dGhpbmcgb3RoZXIgdGhhbiB0aGlzIE9LIGJ1dHRvbiIpOwogICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7CiAgfQoKZnVuY3Rpb24gZGFya01vZGUoKSB7CiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoImRhcmstbW9kZSIpOwp9CgpmdW5jdGlvbiBjbG9ha0ljb24odXJsKSB7CiAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigibGlua1tyZWx+PSdpY29uJ10iKTsKICAgIGxpbmsucmVsID0gImljb24iOwogICAgaWYgKCh1cmwrIiIpLnRyaW0oKS5sZW5ndGggPT09IDApIHsKICAgICAgICBsaW5rLmhyZWYgPSAiZmF2aWNvbi5wbmciOwogICAgfSBlbHNlIHsKICAgICAgICBsaW5rLmhyZWYgPSB1cmw7CiAgICB9CiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmspOwp9CmZ1bmN0aW9uIGNsb2FrTmFtZShzdHJpbmcpIHsKICAgIGlmICgoc3RyaW5nKyIiKS50cmltKCkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSAiZ24tbWF0aCI7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgZG9jdW1lbnQudGl0bGUgPSBzdHJpbmc7Cn0KCmZ1bmN0aW9uIHRhYkNsb2FrKCkgewogICAgY2xvc2VQb3B1cCgpOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwVGl0bGUnKS50ZXh0Q29udGVudCA9ICJUYWIgQ2xvYWsiOwogICAgY29uc3QgcG9wdXBCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwQm9keScpOwogICAgcG9wdXBCb2R5LmlubmVySFRNTCA9IGAKICAgICAgICA8bGFiZWwgZm9yPSJ0YWItY2xvYWstdGV4dGJveCIgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyI+U2V0IFRhYiBUaXRsZTo8L2xhYmVsPjxicj4KICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InRhYi1jbG9hay10ZXh0Ym94IiBwbGFjZWhvbGRlcj0iRW50ZXIgbmV3IHRhYiBuYW1lLi4uIiBvbmlucHV0PSJjbG9ha05hbWUodGhpcy52YWx1ZSkiPgogICAgICAgIDxicj48YnI+PGJyPjxicj4KICAgICAgICA8bGFiZWwgZm9yPSJ0YWItY2xvYWstdGV4dGJveCIgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyI+U2V0IFRhYiBJY29uOjwvbGFiZWw+PGJyPgogICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0idGFiLWNsb2FrLXRleHRib3giIHBsYWNlaG9sZGVyPSJFbnRlciBuZXcgdGFiIGljb24uLi4iIG9uaW5wdXQ9J2Nsb2FrSWNvbih0aGlzLnZhbHVlKSc+CiAgICAgICAgPGJyPjxicj48YnI+CiAgICBgOwogICAgcG9wdXBCb2R5LmNvbnRlbnRFZGl0YWJsZSA9IGZhbHNlOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwT3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7Cn0KCmNvbnN0IHNldHRpbmdzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHRpbmdzJyk7CnNldHRpbmdzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwVGl0bGUnKS50ZXh0Q29udGVudCA9ICJTZXR0aW5ncyI7CiAgICBjb25zdCBwb3B1cEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXBCb2R5Jyk7CiAgICBwb3B1cEJvZHkuaW5uZXJIVE1MID0gYAogICAgPGJ1dHRvbiBjbGFzcz0ic2V0dGluZ3MtYnV0dG9uIiBvbmNsaWNrPSJkYXJrTW9kZSgpIj5Ub2dnbGUgRGFyayBNb2RlPC9idXR0b24+CiAgICA8YnI+PGJyPgogICAgPGJ1dHRvbiBjbGFzcz0ic2V0dGluZ3MtYnV0dG9uIiBvbmNsaWNrPSJ0YWJDbG9haygpIj5UYWIgQ2xvYWs8L2J1dHRvbj4KICAgIDxicj4KICAgIGA7CiAgICBwb3B1cEJvZHkuY29udGVudEVkaXRhYmxlID0gZmFsc2U7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXBPdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsKfSk7CgpmdW5jdGlvbiBzaG93Q29udGFjdCgpIHsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cFRpdGxlJykudGV4dENvbnRlbnQgPSAiQ29udGFjdCI7CiAgICBjb25zdCBwb3B1cEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXBCb2R5Jyk7CiAgICBwb3B1cEJvZHkuaW5uZXJIVE1MID0gYAogICAgPHA+RGlzY29yZDogaHR0cHM6Ly9kaXNjb3JkLmdnL05BRnc0eWtaN248L3A+CiAgICA8cD5FbWFpbDogZ24ubWF0aC5idXNpbmVzc0BnbWFpbC5jb208L3A+YDsKICAgIHBvcHVwQm9keS5jb250ZW50RWRpdGFibGUgPSBmYWxzZTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cE92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwp9CgpmdW5jdGlvbiBsb2FkUHJpdmFjeSgpIHsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cFRpdGxlJykudGV4dENvbnRlbnQgPSAiUHJpdmFjeSBQb2xpY3kiOwogICAgY29uc3QgcG9wdXBCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwQm9keScpOwogICAgcG9wdXBCb2R5LmlubmVySFRNTCA9IGAKICAgICAgICA8ZGl2IHN0eWxlPSJtYXgtaGVpZ2h0OiA2MHZoOyBvdmVyZmxvdy15OiBhdXRvOyI+CiAgICAgICAgICAgIDxoMj5QUklWQUNZIFBPTElDWTwvaDI+CiAgICAgICAgICAgIDxwPkxhc3QgdXBkYXRlZCBBcHJpbCAxNywgMjAyNTwvcD4KICAgICAgICAgICAgPHA+VGhpcyBQcml2YWN5IE5vdGljZSBmb3IgZ24tbWF0aCAoIndlLCIgInVzLCIgb3IgIm91ciIpLCBkZXNjcmliZXMgaG93IGFuZCB3aHkgd2UgbWlnaHQgYWNjZXNzLCBjb2xsZWN0LCBzdG9yZSwgdXNlLCBhbmQvb3Igc2hhcmUgKCJwcm9jZXNzIikgeW91ciBwZXJzb25hbCBpbmZvcm1hdGlvbiB3aGVuIHlvdSB1c2Ugb3VyIHNlcnZpY2VzICgiU2VydmljZXMiKSwgaW5jbHVkaW5nIHdoZW4geW91OjwvcD4KICAgICAgICAgICAgPHVsPgogICAgICAgICAgICAgICAgPGxpPlZpc2l0IG91ciB3ZWJzaXRlIGF0IDxhIGhyZWY9Imh0dHBzOi8vZ24tbWF0aC5naXRodWIuaW8iPmh0dHBzOi8vZ24tbWF0aC5naXRodWIuaW88L2E+LCBvciBhbnkgd2Vic2l0ZSBvZiBvdXJzIHRoYXQgbGlua3MgdG8gdGhpcyBQcml2YWN5IE5vdGljZTwvbGk+CiAgICAgICAgICAgICAgICA8bGk+RW5nYWdlIHdpdGggdXMgaW4gb3RoZXIgcmVsYXRlZCB3YXlzLCBpbmNsdWRpbmcgYW55IHNhbGVzLCBtYXJrZXRpbmcsIG9yIGV2ZW50czwvbGk+CiAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgIDxwPlF1ZXN0aW9ucyBvciBjb25jZXJucz8gUmVhZGluZyB0aGlzIFByaXZhY3kgTm90aWNlIHdpbGwgaGVscCB5b3UgdW5kZXJzdGFuZCB5b3VyIHByaXZhY3kgcmlnaHRzIGFuZCBjaG9pY2VzLiBXZSBhcmUgcmVzcG9uc2libGUgZm9yIG1ha2luZyBkZWNpc2lvbnMgYWJvdXQgaG93IHlvdXIgcGVyc29uYWwgaW5mb3JtYXRpb24gaXMgcHJvY2Vzc2VkLiBJZiB5b3UgZG8gbm90IGFncmVlIHdpdGggb3VyIHBvbGljaWVzIGFuZCBwcmFjdGljZXMsIHBsZWFzZSBkbyBub3QgdXNlIG91ciBTZXJ2aWNlcy4gSWYgeW91IHN0aWxsIGhhdmUgYW55IHF1ZXN0aW9ucyBvciBjb25jZXJucywgcGxlYXNlIGNvbnRhY3QgdXMgYXQgPGEgaHJlZj0iaHR0cHM6Ly9kaXNjb3JkLmdnL05BRnc0eWtaN24iPmh0dHBzOi8vZGlzY29yZC5nZy9OQUZ3NHlrWjduPC9hPi48L3A+CiAgICAgICAgICAgIAogICAgICAgICAgICA8aDM+U1VNTUFSWSBPRiBLRVkgUE9JTlRTPC9oMz4KICAgICAgICAgICAgPHA+VGhpcyBzdW1tYXJ5IHByb3ZpZGVzIGtleSBwb2ludHMgZnJvbSBvdXIgUHJpdmFjeSBOb3RpY2UsIGJ1dCB5b3UgY2FuIGZpbmQgb3V0IG1vcmUgZGV0YWlscyBhYm91dCBhbnkgb2YgdGhlc2UgdG9waWNzIGJ5IGNsaWNraW5nIHRoZSBsaW5rIGZvbGxvd2luZyBlYWNoIGtleSBwb2ludCBvciBieSB1c2luZyBvdXIgdGFibGUgb2YgY29udGVudHMgYmVsb3cgdG8gZmluZCB0aGUgc2VjdGlvbiB5b3UgYXJlIGxvb2tpbmcgZm9yLjwvcD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxwPjxzdHJvbmc+V2hhdCBwZXJzb25hbCBpbmZvcm1hdGlvbiBkbyB3ZSBwcm9jZXNzPzwvc3Ryb25nPiBXaGVuIHlvdSB2aXNpdCwgdXNlLCBvciBuYXZpZ2F0ZSBvdXIgU2VydmljZXMsIHdlIG1heSBwcm9jZXNzIHBlcnNvbmFsIGluZm9ybWF0aW9uIGRlcGVuZGluZyBvbiBob3cgeW91IGludGVyYWN0IHdpdGggdXMgYW5kIHRoZSBTZXJ2aWNlcywgdGhlIGNob2ljZXMgeW91IG1ha2UsIGFuZCB0aGUgcHJvZHVjdHMgYW5kIGZlYXR1cmVzIHlvdSB1c2UuIExlYXJuIG1vcmUgYWJvdXQgcGVyc29uYWwgaW5mb3JtYXRpb24geW91IGRpc2Nsb3NlIHRvIHVzLjwvcD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxwPjxzdHJvbmc+RG8gd2UgcHJvY2VzcyBhbnkgc2Vuc2l0aXZlIHBlcnNvbmFsIGluZm9ybWF0aW9uPzwvc3Ryb25nPiBTb21lIG9mIHRoZSBpbmZvcm1hdGlvbiBtYXkgYmUgY29uc2lkZXJlZCAic3BlY2lhbCIgb3IgInNlbnNpdGl2ZSIgaW4gY2VydGFpbiBqdXJpc2RpY3Rpb25zLCBmb3IgZXhhbXBsZSB5b3VyIHJhY2lhbCBvciBldGhuaWMgb3JpZ2lucywgc2V4dWFsIG9yaWVudGF0aW9uLCBhbmQgcmVsaWdpb3VzIGJlbGllZnMuIFdlIGRvIG5vdCBwcm9jZXNzIHNlbnNpdGl2ZSBwZXJzb25hbCBpbmZvcm1hdGlvbi48L3A+CiAgICAgICAgICAgIAogICAgICAgICAgICA8cD48c3Ryb25nPkRvIHdlIGNvbGxlY3QgYW55IGluZm9ybWF0aW9uIGZyb20gdGhpcmQgcGFydGllcz88L3N0cm9uZz4gV2UgZG8gbm90IGNvbGxlY3QgYW55IGluZm9ybWF0aW9uIGZyb20gdGhpcmQgcGFydGllcy48L3A+CiAgICAgICAgICAgIAogICAgICAgICAgICA8cD48c3Ryb25nPkhvdyBkbyB3ZSBwcm9jZXNzIHlvdXIgaW5mb3JtYXRpb24/PC9zdHJvbmc+IFdlIHByb2Nlc3MgeW91ciBpbmZvcm1hdGlvbiB0byBwcm92aWRlLCBpbXByb3ZlLCBhbmQgYWRtaW5pc3RlciBvdXIgU2VydmljZXMsIGNvbW11bmljYXRlIHdpdGggeW91LCBmb3Igc2VjdXJpdHkgYW5kIGZyYXVkIHByZXZlbnRpb24sIGFuZCB0byBjb21wbHkgd2l0aCBsYXcuIFdlIG1heSBhbHNvIHByb2Nlc3MgeW91ciBpbmZvcm1hdGlvbiBmb3Igb3RoZXIgcHVycG9zZXMgd2l0aCB5b3VyIGNvbnNlbnQuIFdlIHByb2Nlc3MgeW91ciBpbmZvcm1hdGlvbiBvbmx5IHdoZW4gd2UgaGF2ZSBhIHZhbGlkIGxlZ2FsIHJlYXNvbiB0byBkbyBzby4gTGVhcm4gbW9yZSBhYm91dCBob3cgd2UgcHJvY2VzcyB5b3VyIGluZm9ybWF0aW9uLjwvcD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxwPjxzdHJvbmc+SW4gd2hhdCBzaXR1YXRpb25zIGFuZCB3aXRoIHdoaWNoIHBhcnRpZXMgZG8gd2Ugc2hhcmUgcGVyc29uYWwgaW5mb3JtYXRpb24/PC9zdHJvbmc+IFdlIG1heSBzaGFyZSBpbmZvcm1hdGlvbiBpbiBzcGVjaWZpYyBzaXR1YXRpb25zIGFuZCB3aXRoIHNwZWNpZmljIHRoaXJkIHBhcnRpZXMuIExlYXJuIG1vcmUgYWJvdXQgd2hlbiBhbmQgd2l0aCB3aG9tIHdlIHNoYXJlIHlvdXIgcGVyc29uYWwgaW5mb3JtYXRpb24uPC9wPgogICAgICAgICAgICAKICAgICAgICAgICAgPHA+PHN0cm9uZz5Ib3cgZG8gd2Uga2VlcCB5b3VyIGluZm9ybWF0aW9uIHNhZmU/PC9zdHJvbmc+IFdlIGhhdmUgYWRlcXVhdGUgb3JnYW5pemF0aW9uYWwgYW5kIHRlY2huaWNhbCBwcm9jZXNzZXMgYW5kIHByb2NlZHVyZXMgaW4gcGxhY2UgdG8gcHJvdGVjdCB5b3VyIHBlcnNvbmFsIGluZm9ybWF0aW9uLiBIb3dldmVyLCBubyBlbGVjdHJvbmljIHRyYW5zbWlzc2lvbiBvdmVyIHRoZSBpbnRlcm5ldCBvciBpbmZvcm1hdGlvbiBzdG9yYWdlIHRlY2hub2xvZ3kgY2FuIGJlIGd1YXJhbnRlZWQgdG8gYmUgMTAwJSBzZWN1cmUsIHNvIHdlIGNhbm5vdCBwcm9taXNlIG9yIGd1YXJhbnRlZSB0aGF0IGhhY2tlcnMsIGN5YmVyY3JpbWluYWxzLCBvciBvdGhlciB1bmF1dGhvcml6ZWQgdGhpcmQgcGFydGllcyB3aWxsIG5vdCBiZSBhYmxlIHRvIGRlZmVhdCBvdXIgc2VjdXJpdHkgYW5kIGltcHJvcGVybHkgY29sbGVjdCwgYWNjZXNzLCBzdGVhbCwgb3IgbW9kaWZ5IHlvdXIgaW5mb3JtYXRpb24uIExlYXJuIG1vcmUgYWJvdXQgaG93IHdlIGtlZXAgeW91ciBpbmZvcm1hdGlvbiBzYWZlLjwvcD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxwPjxzdHJvbmc+V2hhdCBhcmUgeW91ciByaWdodHM/PC9zdHJvbmc+IERlcGVuZGluZyBvbiB3aGVyZSB5b3UgYXJlIGxvY2F0ZWQgZ2VvZ3JhcGhpY2FsbHksIHRoZSBhcHBsaWNhYmxlIHByaXZhY3kgbGF3IG1heSBtZWFuIHlvdSBoYXZlIGNlcnRhaW4gcmlnaHRzIHJlZ2FyZGluZyB5b3VyIHBlcnNvbmFsIGluZm9ybWF0aW9uLiBMZWFybiBtb3JlIGFib3V0IHlvdXIgcHJpdmFjeSByaWdodHMuPC9wPgogICAgICAgICAgICAKICAgICAgICAgICAgPHA+PHN0cm9uZz5Ib3cgZG8geW91IGV4ZXJjaXNlIHlvdXIgcmlnaHRzPzwvc3Ryb25nPiBUaGUgZWFzaWVzdCB3YXkgdG8gZXhlcmNpc2UgeW91ciByaWdodHMgaXMgYnkgc3VibWl0dGluZyBhIGRhdGEgc3ViamVjdCBhY2Nlc3MgcmVxdWVzdCwgb3IgYnkgY29udGFjdGluZyB1cy4gV2Ugd2lsbCBjb25zaWRlciBhbmQgYWN0IHVwb24gYW55IHJlcXVlc3QgaW4gYWNjb3JkYW5jZSB3aXRoIGFwcGxpY2FibGUgZGF0YSBwcm90ZWN0aW9uIGxhd3MuPC9wPgogICAgICAgIDwvZGl2PgogICAgYDsKICAgIHBvcHVwQm9keS5jb250ZW50RWRpdGFibGUgPSBmYWxzZTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cE92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwp9CgpmdW5jdGlvbiBsb2FkRE1DQSgpIHsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cFRpdGxlJykudGV4dENvbnRlbnQgPSAiRE1DQSI7CiAgICBjb25zdCBwb3B1cEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXBCb2R5Jyk7CiAgICBwb3B1cEJvZHkuaW5uZXJIVE1MID0gYAogICAgICAgIDxkaXYgY2xhc3M9ImRtY2EtY29udGVudCI+CiAgICAgICAgICAgIDxwPgogICAgICAgICAgICAgICAgSWYgeW91IG93biBvciBkZXZlbG9wZWQgYSBnYW1lIHRoYXQgaXMgb24gPHN0cm9uZz5nbi1tYXRoPC9zdHJvbmc+IAogICAgICAgICAgICAgICAgYW5kIHdvdWxkIGxpa2UgaXQgcmVtb3ZlZCwgcGxlYXNlIGRvIG9uZSBvZiB0aGUgZm9sbG93aW5nOgogICAgICAgICAgICA8L3A+CiAgICAgICAgICAgIDxvbD4KICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSJodHRwczovL2Rpc2NvcmQuZ2cvRDRjOVZGWVd5VSIgdGFyZ2V0PSJfYmxhbmsiIHJlbD0ibm9vcGVuZXIgbm9yZWZlcnJlciI+CiAgICAgICAgICAgICAgICAgICAgICAgIEpvaW4gdGhlIERpc2NvcmQKICAgICAgICAgICAgICAgICAgICA8L2E+IGFuZCBETSA8c3Ryb25nPmJyZWFkYmI8L3N0cm9uZz4gb3IgcGluZyBtZSBpbiBhIHB1YmxpYyBjaGFubmVsIAogICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+W0lOU1RBTlQgUkVTUE9OU0VdPC9zdHJvbmc+CiAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgIEVtYWlsIG1lIGF0IAogICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9Im1haWx0bzpnbi5tYXRoLmJ1c2luZXNzQGdtYWlsLmNvbSI+Z24ubWF0aC5idXNpbmVzc0BnbWFpbC5jb208L2E+IAogICAgICAgICAgICAgICAgICAgIHdpdGggdGhlIHN1YmplY3Qgc3RhcnRpbmcgd2l0aCA8Y29kZT4hRE1DQTwvY29kZT4uCiAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5bREVMQVlFRCBSRVNQT05TRV08L3N0cm9uZz4KICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgIDwvb2w+CiAgICAgICAgICAgIDxwPgogICAgICAgICAgICAgICAgSWYgeW91IGFyZSBnb2luZyB0byBkbyBhbiBlbWFpbCwgcGxlYXNlIHNob3cgcHJvb2YgeW91IG93biB0aGUgZ2FtZSBiZWZvcmUgSSBoYXZlIHRvIGFzay4KICAgICAgICAgICAgPC9wPgogICAgICAgIDwvZGl2PgogICAgYDsKICAgIHBvcHVwQm9keS5jb250ZW50RWRpdGFibGUgPSBmYWxzZTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cE92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwp9CgpsZXQgX2FsbFN0YXRzQ2FjaGUgPSBudWxsOwoKYXN5bmMgZnVuY3Rpb24gZ2V0QWxsU3RhdHMoKSB7CiAgaWYgKF9hbGxTdGF0c0NhY2hlKSB7CiAgICByZXR1cm4gX2FsbFN0YXRzQ2FjaGU7CiAgfQoKICBjb25zdCBCQVNFX1VSTCA9CiAgICAiaHR0cHM6Ly9kYXRhLmpzZGVsaXZyLmNvbS92MS9zdGF0cy9wYWNrYWdlcy9naC9nbi1tYXRoL2h0bWxAbWFpbi9maWxlcyI7CiAgY29uc3QgUEVSSU9EID0gInllYXIiOwogIGNvbnN0IFBBR0VfQkFUQ0ggPSA1OwoKICBsZXQgcGFnZSA9IDE7CiAgbGV0IGRvbmUgPSBmYWxzZTsKICBjb25zdCBjb21iaW5lZE1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgogIHdoaWxlICghZG9uZSkgewogICAgY29uc3QgcGFnZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBQQUdFX0JBVENIIH0sIChfLCBpKSA9PiBwYWdlICsgaSk7CgogICAgY29uc3QgcmVzcG9uc2VzID0gYXdhaXQgUHJvbWlzZS5hbGwoCiAgICAgIHBhZ2VzLm1hcChwID0+CiAgICAgICAgZmV0Y2goYCR7QkFTRV9VUkx9P3BlcmlvZD0ke1BFUklPRH0mcGFnZT0ke3B9JmxpbWl0PTEwMGApCiAgICAgICAgICAudGhlbihyID0+IChyLm9rID8gci5qc29uKCkgOiBbXSkpCiAgICAgICkKICAgICk7CgogICAgZm9yIChjb25zdCBkYXRhIG9mIHJlc3BvbnNlcykgewogICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YSkgfHwgZGF0YS5sZW5ndGggPT09IDApIHsKICAgICAgICBkb25lID0gdHJ1ZTsKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGEpIHsKICAgICAgICBpZiAoIWl0ZW0/Lm5hbWUpIGNvbnRpbnVlOwoKICAgICAgICBjb25zdCBtYXRjaCA9IGl0ZW0ubmFtZS5tYXRjaCgvXlwvKFxkKykoWy4tXSkvKTsKICAgICAgICBpZiAoIW1hdGNoKSBjb250aW51ZTsKCiAgICAgICAgY29uc3QgaWQgPSBtYXRjaFsxXTsKCiAgICAgICAgaWYgKCFjb21iaW5lZE1hcFtpZF0pIHsKICAgICAgICAgIGNvbWJpbmVkTWFwW2lkXSA9IHsKICAgICAgICAgICAgaGl0czogMCwKICAgICAgICAgICAgYmFuZHdpZHRoOiAwCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgY29tYmluZWRNYXBbaWRdLmhpdHMgKz0gaXRlbS5oaXRzPy50b3RhbCA/PyAwOwogICAgICAgIGNvbWJpbmVkTWFwW2lkXS5iYW5kd2lkdGggKz0gaXRlbS5iYW5kd2lkdGg/LnRvdGFsID8/IDA7CiAgICAgIH0KICAgIH0KCiAgICBwYWdlICs9IFBBR0VfQkFUQ0g7CiAgfQoKICBfYWxsU3RhdHNDYWNoZSA9IGNvbWJpbmVkTWFwOwogIHJldHVybiBjb21iaW5lZE1hcDsKfQoKYXN5bmMgZnVuY3Rpb24gZ2V0U3RhdHMoaWQpIHsKICBpZCA9IFN0cmluZyhpZCk7CiAgY29uc3QgYWxsU3RhdHMgPSBhd2FpdCBnZXRBbGxTdGF0cygpOwoKICByZXR1cm4gYWxsU3RhdHNbaWRdPy5oaXRzID8/IDA7Cn0KCmZ1bmN0aW9uIHNob3dab25lSW5mbygpIHsKICAgIGxldCBpZCA9IE51bWJlcihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnem9uZUlkJykudGV4dENvbnRlbnQpOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwVGl0bGUnKS50ZXh0Q29udGVudCA9ICJJbmZvIjsKICAgIGNvbnN0IHBvcHVwQm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cEJvZHknKTsKICAgIHBvcHVwQm9keS5pbm5lckhUTUwgPSBgPHA+TG9hZGluZy4uLjwvcD5gCiAgICBwb3B1cEJvZHkuY29udGVudEVkaXRhYmxlID0gZmFsc2U7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXBPdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsKICAgIGZldGNoKGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL2duLW1hdGgvaHRtbC9jb21taXRzP3BhdGg9JHtpZH0uaHRtbGApLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpLnRoZW4oYXN5bmMganNvbiA9PiB7CiAgICAgICAgbGV0IHN0YXRzID0gYXdhaXQgZ2V0U3RhdHMgKGlkKTsKICAgICAgICBpZGpzb24gPSB6b25lcy5maWx0ZXIoYT0+YS5pZD09PWlkKVswXQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cFRpdGxlJykudGV4dENvbnRlbnQgPSBgJHtpZGpzb24ubmFtZX0gSW5mb2A7CiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGpzb24uYXQoLTEpLmNvbW1pdC5hdXRob3IuZGF0ZSk7CiAgICAgICAgbGV0IGZvcm1hdHRlZGRhdGUgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgiZW4tVVMiLCB7CiAgbW9udGg6ICJsb25nIiwKICBkYXk6ICJudW1lcmljIiwKICB5ZWFyOiAibnVtZXJpYyIsCiAgaG91cjogIm51bWVyaWMiLAogIG1pbnV0ZTogIjItZGlnaXQiLAogIGhvdXIxMjogdHJ1ZQp9KS5mb3JtYXQoZGF0ZSk7CiAgICAgICAgcG9wdXBCb2R5LmlubmVySFRNTCA9IGAKICAgICAgICA8cD4KICAgICAgICA8Yj5JZDwvYj46ICR7aWR9PGJyPgogICAgICAgIDxiPk5hbWU8L2I+OiAke2lkanNvbi5uYW1lfTxicj4KICAgICAgICAke2lkanNvbi5hdXRob3I/YDxiPkdhbWUgQXV0aG9yPC9iPjogJHtpZGpzb24uYXV0aG9yfTxicj5gOiIifQogICAgICAgICR7aWRqc29uLmF1dGhvckxpbms/YDxiPkdhbWUgQXV0aG9yIExpbms8L2I+OiA8YSBzdHlsZT0iY29sb3I6I0ZGRkYwMDsiIGhyZWY9JHtpZGpzb24uYXV0aG9yTGlua30+JHtpZGpzb24uYXV0aG9yTGlua308L2E+PGJyPmA6IiJ9CiAgICAgICAgJHtpZGpzb24uc3BlY2lhbD9gPGI+VGFnczwvYj46ICR7aWRqc29uLnNwZWNpYWx9PGJyPmA6IiJ9CiAgICAgICAgPGI+R24tTWF0aCBBZGRlcjwvYj46ICR7anNvbi5hdCgtMSkuY29tbWl0LmF1dGhvci5uYW1lfTxicj4KICAgICAgICA8Yj5EYXRlIEFkZGVkPC9iPjogJHtmb3JtYXR0ZWRkYXRlfTxicj4KICAgICAgICA8Yj5UaW1lcyBQbGF5ZWQgKEdsb2JhbGx5KTwvYj46ICR7TnVtYmVyKHN0YXRzKS50b0xvY2FsZVN0cmluZygiZW4tVVMiKX0KICAgICAgICA8L3A+YDsKICAgIH0pCn0KCmZ1bmN0aW9uIGNsb3NlUG9wdXAoKSB7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXBPdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKfQpsaXN0Wm9uZXMoKTsKCmNvbnN0IHNjaG9vbExpc3QgPSBbImRlbGVkYW8iLCAiZ29ndWFyZGlhbiIsICJsaWdodHNwZWVkIiwgImxpbmV3aXplIiwgInNlY3VybHkiLCAiLmVkdS8iXTsKCmZ1bmN0aW9uIGlzQmxvY2tlZERvbWFpbih1cmwpIHsKICAgIHRyeSB7CiAgICBjb25zdCBkb21haW4gPSBuZXcgVVJMKHVybCwgbG9jYXRpb24ub3JpZ2luKS5ob3N0bmFtZSArICIvIjsKICAgIHJldHVybiBzY2hvb2xMaXN0LnNvbWUoc2Nob29sID0+IGRvbWFpbi5pbmNsdWRlcyhzY2hvb2wpKTsKICAgIH0gY2F0Y2goZXJyb3Ipe3JldHVybiBmYWxzZTt9Cn0KCmNvbnN0IG9yaWdpbmFsRmV0Y2ggPSB3aW5kb3cuZmV0Y2g7CndpbmRvdy5mZXRjaCA9IGZ1bmN0aW9uICh1cmwsIG9wdGlvbnMpIHsKICAgIGlmIChpc0Jsb2NrZWREb21haW4odXJsKSkgewogICAgICAgIGNvbnNvbGUud2FybihgbGFtYCk7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigibGFtIikpOwogICAgfQogICAgcmV0dXJuIG9yaWdpbmFsRmV0Y2guYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfTsKCmNvbnN0IG9yaWdpbmFsT3BlbiA9IFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5vcGVuOwpYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uIChtZXRob2QsIHVybCkgewogICAgaWYgKGlzQmxvY2tlZERvbWFpbih1cmwpKSB7CiAgICAgICAgY29uc29sZS53YXJuKGBsYW1gKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICByZXR1cm4gb3JpZ2luYWxPcGVuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn07CgpIVE1MQ2FudmFzRWxlbWVudC5wcm90b3R5cGUudG9EYXRhVVJMID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHsKICAgIHJldHVybiAiIjsKfTsKPC9zY3JpcHQ+CiAgICA8c2NyaXB0PgogICAgICAgIHRyeSB7CiAgICAgICAgY29uc3Qgc2VhcmNoID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTsKICAgICAgICBjb25zdCBwcml2YWN5ID0gc2VhcmNoLmdldCgncHJpdmFjeScpOwogICAgICAgIGlmIChwcml2YWN5KSB7CiAgICAgICAgICAgIGxvYWRQcml2YWN5KCk7CiAgICAgICAgfQogICAgICAgIH0gY2F0Y2goZXJyb3Ipe30KICAgIDwvc2NyaXB0PgogICAgPHNjcmlwdD4KICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3Rlcihsb2NhdGlvbi5wcm90b2NvbCsiLy8iK2xvY2F0aW9uLmhvc3RuYW1lKyIvc3cuanMiKTsKICAgIDwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4=
